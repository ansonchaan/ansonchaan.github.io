"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{4186:function(e,s,t){t.d(s,{default:function(){return I}});var r=t(7437),o=t(2298),n=t(4673),u=t(5780),a=t(3742),c=t(7359),d=t(2265),l=t(7776);let i=e=>1===e?1:1-Math.pow(2,-10*e);function v(e){let{url:s,soundUrls:t,speed:v=.2,noiseAmplitude:p=.2,noiseScale:T=.2,hoverRadius:w=1,hoverNoiseScale:P=100,hoverHeight:f=.5,easingDuration:E=.3,width:S,...L}=e,I=(0,d.useRef)(),D=(0,d.useRef)([]),O=(0,d.useRef)(null),{nodes:_}=(0,n.L)(s),[h,Y]=(0,d.useState)(null),[b,m]=(0,d.useState)(!1),{camera:y,raycaster:g}=(0,u.D)(),[x]=(0,a.KO)(o.td),[M]=(0,a.KO)(o.h9),[F,A]=(0,d.useState)(0),j=(0,d.useRef)(null),k=(0,d.useRef)(null),C=(0,d.useRef)(null),R=(0,d.useRef)(0),z=(0,d.useRef)(null),[U,V]=(0,d.useState)(0),[q,K]=(0,d.useState)(0);(0,c.LZ)(e=>{V(e.progress),K(e.scroll)});let N=(0,d.useCallback)(()=>{O.current||(O.current=new(window.AudioContext||window.webkitAudioContext))},[]),Z=(0,d.useCallback)(()=>{let e=Math.floor(Math.random()*t.length);return t[e]},[t]),H=(0,d.useCallback)(e=>{if(e.isFading)return;e.isFading=!0;let s=e.audio.volume,t=()=>{if(s=Math.max(0,s-.08),e.audio.volume=s,s>0)requestAnimationFrame(t);else{e.audio.pause(),e.source.disconnect(),e.analyser.disconnect();let s=D.current.findIndex(s=>s===e);-1!==s&&D.current.splice(s,1)}};requestAnimationFrame(t)},[]),W=(0,d.useCallback)(()=>{D.current.forEach(e=>{H(e)})},[H]),B=(0,d.useCallback)(e=>{if(!O.current)return null;let s=new Audio(e),t=O.current.createMediaElementSource(s),r=O.current.createAnalyser();r.fftSize=256,t.connect(r),r.connect(O.current.destination);let o={audio:s,source:t,analyser:r,isFading:!1};return D.current.push(o),s.addEventListener("ended",()=>{H(o)}),o},[H]),Q=(0,d.useCallback)(()=>{if(!M||x)return;N();let e=B(Z());e&&(e.audio.volume=1,e.audio.play().catch(e=>console.log("Audio play failed:",e)))},[M,x,Z,B,N]);(0,d.useEffect)(()=>{M&&N()},[M,N]),(0,d.useEffect)(()=>()=>{D.current.forEach(e=>{e.audio.pause(),e.source.disconnect(),e.analyser.disconnect()}),D.current=[],O.current&&(O.current.close(),O.current=null)},[]),(0,d.useEffect)(()=>{x&&W()},[x,W]);let X=()=>{Y(null),m(!1),z.current=null,W()},{geometry:G,material:J}=(0,d.useMemo)(()=>{let e=Object.values(_).find(e=>e.isMesh);return e.material.normalScale=new l.Vector2(0,0),e.material.side=l.FrontSide,e.material.metalness=.01,e.material.flatShading=!0,e.material.specularIntensity=0,e},[_]),$=(0,d.useMemo)(()=>{let e=G.clone();e.setAttribute("basePosition",new l.BufferAttribute(e.attributes.position.array.slice(),3));let s=new Map,t=e.attributes.basePosition;for(let e=0;e<t.count;e++){let r=t.array[3*e],o=t.array[3*e+1],n=t.array[3*e+2],u="".concat(r.toFixed(4),",").concat(o.toFixed(4),",").concat(n.toFixed(4));s.has(u)||s.set(u,[]),s.get(u).push(e)}return e.vertexMap=s,j.current=new Float32Array(e.attributes.position.count),k.current=new Float32Array(e.attributes.position.count),C.current=new Float32Array(3*e.attributes.position.count),e},[G]);return(0,u.F)(e=>{let{clock:s}=e,t=s.getElapsedTime(),r=Math.min(t-R.current,.1);R.current=t;let o=$.attributes.position,n=$.attributes.basePosition,u=$.attributes.normal,a=$.vertexMap,c=new Set;for(let e=0;e<o.count;e++){if(c.has(e))continue;let s=n.array[3*e],d=n.array[3*e+1],P=n.array[3*e+2],S="".concat(s.toFixed(4),",").concat(d.toFixed(4),",").concat(P.toFixed(4)),L=a.get(S),I=u.array[3*e],D=u.array[3*e+1],O=u.array[3*e+2],_=0;if(h){let e=new l.Vector3(s,d,P).distanceTo(h);e<w&&(_=Math.pow(1-e/w,1.5))}let Y=j.current[e],b=1/E;_>Y?j.current[e]=Math.min(Y+r*b,_):j.current[e]=Math.max(Y-r*b,_);let m=function(e,s,t){let r,o,n,u,a,c,d,l,i,v;let p=Array(512),T=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let e=0;e<256;e++)p[256+e]=p[e]=T[e];function w(e,s,t,r){return e[0]*s+e[1]*t+e[2]*r}let P=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],f=1/3*(e+s+t),E=Math.floor(e+f),S=Math.floor(s+f),L=Math.floor(t+f),I=1/6*(E+S+L),D=e-(E-I),O=s-(S-I),_=t-(L-I);D>=O?O>=_?(a=1,c=0,d=0,l=1,i=1,v=0):(D>=_?(a=1,c=0,d=0):(a=0,c=0,d=1),l=1,i=0,v=1):O<_?(a=0,c=0,d=1,l=0,i=1,v=1):D<_?(a=0,c=1,d=0,l=0,i=1,v=1):(a=0,c=1,d=0,l=1,i=1,v=0);let h=D-a+1/6,Y=O-c+1/6,b=_-d+1/6,m=D-l+1/6*2,y=O-i+1/6*2,g=_-v+1/6*2,x=D-1+1/6*3,M=O-1+1/6*3,F=_-1+1/6*3,A=255&E,j=255&S,k=255&L,C=P[p[A+p[j+p[k]]]%12],R=P[p[A+a+p[j+c+p[k+d]]]%12],z=P[p[A+l+p[j+i+p[k+v]]]%12],U=P[p[A+1+p[j+1+p[k+1]]]%12],V=.6-D*D-O*O-_*_;V<0?r=0:(V*=V,r=V*V*w(C,D,O,_));let q=.6-h*h-Y*Y-b*b;q<0?o=0:(q*=q,o=q*q*w(R,h,Y,b));let K=.6-m*m-y*y-g*g;K<0?n=0:(K*=K,n=K*K*w(z,m,y,g));let N=.6-x*x-M*M-F*F;return N<0?u=0:(N*=N,u=N*N*w(U,x,M,F)),32*(r+o+n+u)}(s*T+t*v,d*T+t*v,P*T+t*v)*p;for(let t of L){c.add(t),j.current[t]=j.current[e];let r=i(j.current[t]),n=r>0&&M?f*r:0;o.array[3*t]=s+I*(m+n),o.array[3*t+1]=d+D*(m+n),o.array[3*t+2]=P+O*(m+n)}}o.needsUpdate=!0}),(0,r.jsx)("group",{children:(0,r.jsx)("mesh",{...L,ref:I,geometry:$,material:J,onPointerMove:e=>{let{clientX:s,clientY:t}=e,r=Date.now(),o=new l.Vector2((s+window.innerWidth*(S>=1024?.15:S>=768?.25:0))/window.innerWidth*2-1,-(t/window.innerHeight*2)+1);g.setFromCamera(o,y);let n=g.intersectObject(I.current);if(n.length>0){let e=n[0].point;if(b||(m(!0),Q()),z.current){let s=e.distanceTo(z.current),t=r-F;s>.2&&t>1e3&&(Q(),A(r))}Y(e),z.current=e}else X()},onPointerLeave:X,rotation:[0,Math.PI/8,0],scale:[1,1,S>=768&&q>0?1-.8*U:1]})})}var p=t(789),T=t(1010),w=t(7585),P=t(3631),f=t(52),E=t(5464),S=t(4398),L=t(357);function I(e){let{width:s}=e,t=(0,d.useRef)();return(0,c.LZ)(e=>{t.current&&e.scroll>0&&(t.current.setAzimuthalAngle(e.progress*Math.PI*2),t.current.setPolarAngle(Math.PI/2+e.progress*Math.PI/4))}),(0,r.jsxs)(w.Xz,{style:{pointerEvents:S.tq?"unset":"initial"},camera:{position:[0,0,s>=1024?16:s>=768?25:17],fov:30},children:[(0,r.jsx)("ambientLight",{intensity:.8}),(0,r.jsx)("pointLight",{position:[3,8,10],intensity:1500,color:"#AE63E7"}),(0,r.jsx)(p.b,{children:(0,r.jsx)(v,{url:"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/stoneV2.glb"),soundUrls:["/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - arp 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - arp 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - arp 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bass.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - blaa.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 4.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 5.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 6.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 7.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bleep 8.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 4.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 5.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 6.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 7.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 8.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 9.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 10.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 11.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bloop 12.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bongo.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - bubbly.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - chainsaw.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - clinical.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 4.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 5.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - framedrum 6.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - funky.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - groove.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 4.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 5.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 6.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 7.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 8.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - harp 9.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - jazz.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - noise 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - noise 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - noise 3.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - pickup.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - scratchy.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - sing.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - six.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - snareclap.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - steel 1.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - steel 2.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - subby.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - talking.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - thump.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - tribal.wav"),"/".concat("true"===L.env.IS_DEPLOY?"2024/":"deTour2024/","assets/sounds/deTour clips - ufo.wav")],speed:.1,noiseAmplitude:.1,noiseScale:.5,hoverRadius:1.5,hoverHeight:.3,easingDuration:2,width:s})}),(0,r.jsx)(T.z,{ref:t,enableZoom:!1,enablePan:!1,enableRotate:!1}),(0,r.jsx)(P.x,{enableNormalPass:!0,children:(0,r.jsx)(f.K,{blendFunction:E.YQ.MULTIPLY,samples:30,rings:0,distanceThreshold:1,distanceFalloff:0,rangeThreshold:0,rangeFalloff:0,luminanceInfluence:0,radius:0,worldDistanceThreshold:.01,worldDistanceFalloff:.1,worldProximityThreshold:.01,worldProximityFalloff:.1,bias:.5})})]})}},2298:function(e,s,t){t.d(s,{h9:function(){return u},ix:function(){return c},jr:function(){return o},td:function(){return n},zU:function(){return a}});var r=t(9910);let o=(0,r.cn)(!1),n=(0,r.cn)(!0),u=(0,r.cn)(!1),a=(0,r.cn)(0),c=(0,r.cn)(!1)}}]);