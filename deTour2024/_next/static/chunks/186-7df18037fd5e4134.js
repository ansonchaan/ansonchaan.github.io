"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{4186:function(e,s,o){o.d(s,{default:function(){return y}});var t=o(7437),a=o(2298),r=o(4673),n=o(5780),u=o(3742),c=o(7359),d=o(2265),l=o(7776);let i=e=>1===e?1:1-Math.pow(2,-10*e);function p(e){let{url:s,soundUrls:o,speed:p=.2,noiseAmplitude:T=.2,noiseScale:w=.2,hoverRadius:v=1,hoverNoiseScale:f=100,hoverHeight:h=.5,easingDuration:b=.3,width:m,...y}=e,g=(0,d.useRef)(),x=(0,d.useRef)([]),M=(0,d.useRef)(null),{nodes:F}=(0,r.L)(s),[A,P]=(0,d.useState)(null),[j,k]=(0,d.useState)(!1),{camera:E,raycaster:S}=(0,n.D)(),[C]=(0,u.KO)(a.td),[R]=(0,u.KO)(a.h9),[L,I]=(0,d.useState)(0),z=(0,d.useRef)(null),D=(0,d.useRef)(null),O=(0,d.useRef)(null),U=(0,d.useRef)(0),V=(0,d.useRef)(null),[_,q]=(0,d.useState)(0),[K,N]=(0,d.useState)(0);(0,c.LZ)(e=>{q(e.progress),N(e.scroll)});let Z=(0,d.useCallback)(()=>{M.current||(M.current=new(window.AudioContext||window.webkitAudioContext))},[]),H=(0,d.useCallback)(()=>{let e=Math.floor(Math.random()*o.length);return o[e]},[o]),W=(0,d.useCallback)(e=>{if(e.isFading)return;e.isFading=!0;let s=e.audio.volume,o=()=>{if(s=Math.max(0,s-.08),e.audio.volume=s,s>0)requestAnimationFrame(o);else{e.audio.pause(),e.source.disconnect(),e.analyser.disconnect();let s=x.current.findIndex(s=>s===e);-1!==s&&x.current.splice(s,1)}};requestAnimationFrame(o)},[]),Y=(0,d.useCallback)(()=>{x.current.forEach(e=>{W(e)})},[W]),B=(0,d.useCallback)(e=>{if(!M.current)return null;let s=new Audio(e),o=M.current.createMediaElementSource(s),t=M.current.createAnalyser();t.fftSize=256,o.connect(t),t.connect(M.current.destination);let a={audio:s,source:o,analyser:t,isFading:!1};return x.current.push(a),s.addEventListener("ended",()=>{W(a)}),a},[W]),Q=(0,d.useCallback)(()=>{if(!R||C)return;Z();let e=B(H());e&&(e.audio.volume=1,e.audio.play().catch(e=>console.log("Audio play failed:",e)))},[R,C,H,B,Z]);(0,d.useEffect)(()=>{R&&Z()},[R,Z]),(0,d.useEffect)(()=>()=>{x.current.forEach(e=>{e.audio.pause(),e.source.disconnect(),e.analyser.disconnect()}),x.current=[],M.current&&(M.current.close(),M.current=null)},[]),(0,d.useEffect)(()=>{C&&Y()},[C,Y]);let X=()=>{P(null),k(!1),V.current=null,Y()},{geometry:G,material:J}=(0,d.useMemo)(()=>{let e=Object.values(F).find(e=>e.isMesh);return e.material.normalScale=new l.Vector2(0,0),e.material.side=l.FrontSide,e.material.metalness=.01,e.material.flatShading=!0,e.material.specularIntensity=0,e},[F]),$=(0,d.useMemo)(()=>{let e=G.clone();e.setAttribute("basePosition",new l.BufferAttribute(e.attributes.position.array.slice(),3));let s=new Map,o=e.attributes.basePosition;for(let e=0;e<o.count;e++){let t=o.array[3*e],a=o.array[3*e+1],r=o.array[3*e+2],n="".concat(t.toFixed(4),",").concat(a.toFixed(4),",").concat(r.toFixed(4));s.has(n)||s.set(n,[]),s.get(n).push(e)}return e.vertexMap=s,z.current=new Float32Array(e.attributes.position.count),D.current=new Float32Array(e.attributes.position.count),O.current=new Float32Array(3*e.attributes.position.count),e},[G]);return(0,n.F)(e=>{let{clock:s}=e,o=s.getElapsedTime(),t=Math.min(o-U.current,.1);U.current=o;let a=$.attributes.position,r=$.attributes.basePosition,n=$.attributes.normal,u=$.vertexMap,c=new Set;for(let e=0;e<a.count;e++){if(c.has(e))continue;let s=r.array[3*e],d=r.array[3*e+1],f=r.array[3*e+2],m="".concat(s.toFixed(4),",").concat(d.toFixed(4),",").concat(f.toFixed(4)),y=u.get(m),g=n.array[3*e],x=n.array[3*e+1],M=n.array[3*e+2],F=0;if(A){let e=new l.Vector3(s,d,f).distanceTo(A);e<v&&(F=Math.pow(1-e/v,1.5))}let P=z.current[e],j=1/b;F>P?z.current[e]=Math.min(P+t*j,F):z.current[e]=Math.max(P-t*j,F);let k=function(e,s,o){let t,a,r,n,u,c,d,l,i,p;let T=Array(512),w=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let e=0;e<256;e++)T[256+e]=T[e]=w[e];function v(e,s,o,t){return e[0]*s+e[1]*o+e[2]*t}let f=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],h=1/3*(e+s+o),b=Math.floor(e+h),m=Math.floor(s+h),y=Math.floor(o+h),g=1/6*(b+m+y),x=e-(b-g),M=s-(m-g),F=o-(y-g);x>=M?M>=F?(u=1,c=0,d=0,l=1,i=1,p=0):(x>=F?(u=1,c=0,d=0):(u=0,c=0,d=1),l=1,i=0,p=1):M<F?(u=0,c=0,d=1,l=0,i=1,p=1):x<F?(u=0,c=1,d=0,l=0,i=1,p=1):(u=0,c=1,d=0,l=1,i=1,p=0);let A=x-u+1/6,P=M-c+1/6,j=F-d+1/6,k=x-l+1/6*2,E=M-i+1/6*2,S=F-p+1/6*2,C=x-1+1/6*3,R=M-1+1/6*3,L=F-1+1/6*3,I=255&b,z=255&m,D=255&y,O=f[T[I+T[z+T[D]]]%12],U=f[T[I+u+T[z+c+T[D+d]]]%12],V=f[T[I+l+T[z+i+T[D+p]]]%12],_=f[T[I+1+T[z+1+T[D+1]]]%12],q=.6-x*x-M*M-F*F;q<0?t=0:(q*=q,t=q*q*v(O,x,M,F));let K=.6-A*A-P*P-j*j;K<0?a=0:(K*=K,a=K*K*v(U,A,P,j));let N=.6-k*k-E*E-S*S;N<0?r=0:(N*=N,r=N*N*v(V,k,E,S));let Z=.6-C*C-R*R-L*L;return Z<0?n=0:(Z*=Z,n=Z*Z*v(_,C,R,L)),32*(t+a+r+n)}(s*w+o*p,d*w+o*p,f*w+o*p)*T;for(let o of y){c.add(o),z.current[o]=z.current[e];let t=i(z.current[o]),r=t>0&&R?h*t:0;a.array[3*o]=s+g*(k+r),a.array[3*o+1]=d+x*(k+r),a.array[3*o+2]=f+M*(k+r)}}a.needsUpdate=!0}),(0,t.jsx)("group",{children:(0,t.jsx)("mesh",{...y,ref:g,geometry:$,material:J,onPointerMove:e=>{let{clientX:s,clientY:o}=e,t=Date.now(),a=new l.Vector2((s+window.innerWidth*(m>=1024?.15:m>=768?.25:0))/window.innerWidth*2-1,-(o/window.innerHeight*2)+1);S.setFromCamera(a,E);let r=S.intersectObject(g.current);if(r.length>0){let e=r[0].point;if(j||(k(!0),Q()),V.current){let s=e.distanceTo(V.current),o=t-L;s>.2&&o>1e3&&(Q(),I(t))}P(e),V.current=e}else X()},onPointerLeave:X,rotation:[0,Math.PI/8,0],scale:[1,1,m>=768&&K>0?1-.8*_:1]})})}var T=o(789),w=o(1010),v=o(7585),f=o(3631),h=o(52),b=o(5464),m=o(4398);function y(e){let{width:s}=e,o=(0,d.useRef)();return(0,c.LZ)(e=>{o.current&&e.scroll>0&&(o.current.setAzimuthalAngle(e.progress*Math.PI*2),o.current.setPolarAngle(Math.PI/2+e.progress*Math.PI/4))}),(0,t.jsxs)(v.Xz,{style:{pointerEvents:m.tq?"unset":"initial"},camera:{position:[0,0,s>=1024?16:s>=768?25:17],fov:30},children:[(0,t.jsx)("ambientLight",{intensity:.8}),(0,t.jsx)("pointLight",{position:[3,8,10],intensity:1500,color:"#AE63E7"}),(0,t.jsx)(T.b,{children:(0,t.jsx)(p,{url:"/".concat("deTour2024/","assets/stoneV2.glb"),soundUrls:["/".concat("deTour2024/","assets/sounds/deTour clips - arp 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - arp 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - arp 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bass.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - blaa.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 4.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 5.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 6.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 7.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bleep 8.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 4.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 5.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 6.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 7.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 8.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 9.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 10.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 11.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bloop 12.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bongo.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - bubbly.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - chainsaw.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - clinical.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 4.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 5.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - framedrum 6.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - funky.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - groove.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 4.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 5.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 6.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 7.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 8.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - harp 9.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - jazz.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - noise 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - noise 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - noise 3.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - pickup.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - scratchy.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - sing.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - six.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - snareclap.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - steel 1.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - steel 2.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - subby.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - talking.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - thump.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - tribal.wav"),"/".concat("deTour2024/","assets/sounds/deTour clips - ufo.wav")],speed:.1,noiseAmplitude:.1,noiseScale:.5,hoverRadius:1.5,hoverHeight:.3,easingDuration:2,width:s})}),(0,t.jsx)(w.z,{ref:o,enableZoom:!1,enablePan:!1,enableRotate:!1}),(0,t.jsx)(f.x,{enableNormalPass:!0,children:(0,t.jsx)(h.K,{blendFunction:b.YQ.MULTIPLY,samples:30,rings:0,distanceThreshold:1,distanceFalloff:0,rangeThreshold:0,rangeFalloff:0,luminanceInfluence:0,radius:0,worldDistanceThreshold:.01,worldDistanceFalloff:.1,worldProximityThreshold:.01,worldProximityFalloff:.1,bias:.5})})]})}},2298:function(e,s,o){o.d(s,{h9:function(){return n},ix:function(){return c},jr:function(){return a},td:function(){return r},zU:function(){return u}});var t=o(9910);let a=(0,t.cn)(!1),r=(0,t.cn)(!0),n=(0,t.cn)(!1),u=(0,t.cn)(0),c=(0,t.cn)(!1)}}]);