{"version":3,"sources":["_component/ThreejsBg/mask.jpg","reducers/index.js","store.js","_component/nav/index.js","page/home/index.js","_component/scroll.js","page/projects/index.js","page/single/project/index.js","page/about/index.js","_component/ThreejsBg/index.js","_component/pagewrap/index.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","updateLanguage","lang","type","updateIsStarted","isStarted","updateImageClickedIdx","imageClickedIdx","updateProjectItems","projectItems","updateCategory","category","updatePage","page","updateHideProjects","isHideProjects","fetchDataSuccess","data","fetchAllData","dispatch","getState","state","cache","myCache","get","console","log","fetchData","singlePostTitle","arguments","length","undefined","Promise","resolve","uid","catch","e","promise","siteData","initialState","deviceType","isMobile","homeData","projectsData","projectSingleData","reducer","action","Object","objectSpread","content","langData","languages","isServer","window","document","createElement","Nav","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onClick","projectNum","categoryWrap","currentLang","location","pathname","replace","TweenMax","set","transitionDelay","prevProps","_this2","num","to","getAttribute","roundProps","ease","onUpdate","innerText","target","querySelector","offsetLeft","x","offsetWidth","setTimeout","setAttribute","categories","slug","idx","findIndex","v","concat","Back","easeOut","config","y","autoAlpha","delay","_this3","globalData","react_default","a","Fragment","ref","elem","hof","id","className","title3","split","map","value","key","name","about","data-num","xmlns","width","height","viewBox","data-name","d","transform","dangerouslySetInnerHTML","__html","shortDes","href","getAnotherLanguage","shortDisplay","Component","connect","Home","pageName","titleSpan","cloneTitle","done","filter","el","tl","TimelineMax","_loop","i","xory","Math","round","random","style","willChange","time","fromTo","overwrite","onComplete","textAnim","nextProps","cloneNode","appendChild","querySelectorAll","remove","_this4","title1","title2","w","FrameImpulse","numToRemove","vendors","r","listeners","numListeners","toRemove","lastTime","requestAnimationFrame","callback","currTime","Date","getTime","timeToCall","max","on","f","body","scrollTo","indexOf","push","off","splice","getListeners","run","deltaTime","indexToRemove","j","VirtualScroll","touchStartX","touchStartY","bodyTouchAction","vs","initialized","touchMult","firefoxMult","keyStep","mouseMult","hasWheelEvent","hasMouseWheelEvent","hasKeyDown","hasTouchWin","navigator","msMaxTouchPoints","hasPointer","msPointerEnabled","isFirefox","userAgent","event","deltaX","deltaY","originalEvent","k","initListeners","options","opt","destroyListeners","lockTouch","addEventListener","preventDefault","notify","onWheel","wheelDeltaX","wheelDeltaY","deltaMode","onMouseWheel","wheelDelta","onTouchStart","t","targetTouches","pageX","pageY","onTouchMove","onKeyDown","keyCode","msTouchAction","removeEventListener","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","requestID","clearTimeout","URLSearchParams","searchString","self","results","RegExp","exec","decodeURI","hasClass","classList","contains","match","addClass","add","removeClass","item","els","reg","addEvent","obj","attachEvent","setTranslate","z","webkitTransform","msTransform","lazyLoad","init","imgs","checkAndShowImg","_img","getBoundingClientRect","top","innerHeight","__img","src","tagName","backgroundImage","SmoothScroll","scrollFunc","elemWidth","elemHeight","fullElemHeight","targetX","targetY","currentX","currentY","showScrollBar","disable","isSelf","onScroll","min","onAnim","parentNode","offsetHeight","toFixed","refresh","rePositionScrollBar","onMouseDownArrowTop","onMouseDownArrowBot","scrollBarHeight","scrollBar","scrollBarY","padding","onMouseDownScrollBar","oldMouseY","clickedScrollBar","onMoveScrollBar","onMouseUpScrollBar","scrollBarWrap","isOn","onResize","innerWidth","onEnable","arrowTop","arrowBot","dragIcon","innerHTML","reset","enable","hideScrollBar","Projects","items","projects","scrollWrap","smooth","inScreenItems","clickable","heading","imageWrap","info","elemOffset","offsetTop","getInScreenItems","staggerTo","easeIn","prevIdx","staggerFromTo","smoothScroll","s","h","slideOutItems","updatedItems","Array","from","slideInItems","infos","filteredData","description","images","logoresize","logo","backgroundColor","logocolor","data-src","thumbnail","ProjectSingle","projectSingle","closeBtn","bind","assertThisInitialized","force3D","video","currentTarget","paused","play","pause","fdata","qrcode_react_lib_default","website","url","renderAs","introduction","details","tags","awards","year","result","showcase","alt","About","activeId","openArticle","setState","image","articles","hidedetails","moredetails","article","warn","canvasWrap","useRef","initImageFunction","removeImageFunction","updateImageEffectFunction","loadImageFunction","updateStopEaseFunction","backToHomeFunction","onClickFunction","useEffect","current","usePrevious","scene","camera","renderer","dist","screenWidth","screenHeight","initHeight","plane","planeOffsetAttribute","imageInstancedCount","imageOffsetAttribute","imageRotateAttribute","imageScaleAttribute","imageTextureIdxAttribute","imageSlideProgressAttribute","imageDisplacementAttribute","imageVisibleAttribute","planeOffsets","planeSpeed","clicked","initedImage","imagesMaterial","changedCategory","offset","rotate","disableEase","tween","imageOffsets","imageBGOffsets","imageBGEase","imageRotate","imageScale","imageSize","imageTexture","imageTextureIdx","imageSlideProgress","imageDisplacement","imageVisible","imageLoaded","imageInScreenIdx","imageInScreenTexture","tempImageSize","imageWrapDOM","logoRotateSpeed","rotateSpeed","slideProgress","gary","getScreenSize","vFOV","THREE","degToRad","fov","tan","aspect","getRandomXY","bottomPos","planeWidth","o","b","sqrt","convert2dto3d","vector","unproject","dir","sub","position","normalize","distance","clone","multiplyScalar","initLight","ambientLight","initMesh","initPlane","initLogo","material","color","topShpereGeometry","topShpere","sin","PI","cos","botShpereGeometry","botShpere","leftShpereGeometry","leftShpere","rightShpereGeometry","rightShpere","topCylinderGeometry","smallBallSize","ballDist","topCylinder","rotation","botCylinderGeometry","botCylinder","leftCylinderGeometry","leftCylinder","rightCylinderGeometry","rightCylinder","centerShpereGeometry","updateMatrix","merge","geometry","matrix","finalMaterial","uniforms","disp","load","mask","vertexShader","join","fragmentShader","side","bufferGeometry","maxInstancedCount","index","attributes","normal","_getRandomXY","Float32Array","addAttribute","wireframe","transparent","onBeforeCompile","shader","loadTexture","flipY","anisotropy","capabilities","getMaxAnisotropy","resizeImage","loadImage","lth","children","scaleHeight","hh","setXY","initImage","catIdx","allItem","itemSize","realCount","_convert2dto3d","uv","inScreenIdx","inScreenTexture","clickedIdx","isGary","depthTest","minFilter","imageAnim","imageEffect","realIdx","onStart","stopEase","removeImage","kill","dispose","update","botPos","needsUpdate","_i","pos","setX","_convert2dto3d2","left","setXYZ","draw","lookAt","render","screen","antialias","alpha","setPixelRatio","devicePixelRatio","setSize","setClearColor","domElement","setAnimationLoop","opacity","backToHome","onWindowResize","updateProjectionMatrix","PageWrap","bodyWrap","params","nav","Switch","Route","exact","path","page_home","page_projects","project","page_about","_component_ThreejsBg","App","adjustFontSize","roundNumber","baseFontRatio","fontMultiplier","documentElement","fontSize","getDevice","reload","timer","getElementsByTagName","clientWidth","vendor","opera","test","substr","check","pagewrap","Redirect","history","createMemoryHistory","initialEntries","createBrowserHistory","basename","middleware","thunk","routerMiddleware","composedEnhancers","compose","apply","applyMiddleware","__PRELOADED_STATE__","store","createStore","connectRouter","rootReducer","Application","es","connected_react_router_lib","react_frontload_lib","noServerRender","src_App","root","hasChildNodes","Loadable","preloadReady","then","hydrate"],"mappings":"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","file":"static/js/main.02d64849.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mask.3b901ee9.jpg\";","// import Prismic from \"prismic-javascript\";\r\nimport siteData from \"../siteData\";\r\nimport React from 'react';\r\nimport myCache from \"memory-cache\";\r\n\r\nconst ReactIsInDevMode = () => {\r\n  return '_self' in React.createElement('div');\r\n}\r\n\r\n//\r\n// Actions\r\n//\r\nexport const UPDATE_LANGUAGE = \"UPDATE_LANGUAGE\";\r\nexport const UPDATE_ISSTARTED = \"UPDATE_ISSTARTED\";\r\nexport const UPDATE_IMAGECLICKEDIDX = \"UPDATE_IMAGECLICKEDIDX\";\r\nexport const UPDATE_PROJECTITEMS = \"UPDATE_PROJECTITEMS\";\r\nexport const UPDATE_CATEGORY = \"UPDATE_CATEGORY\";\r\nexport const UPDATE_PAGE = \"UPDATE_PAGE\";\r\nexport const UPDATE_HIDEPROJECTS = \"UPDATE_HIDEPROJECTS\";\r\n\r\nexport const FETCH_REQUEST = \"FETCH_REQUEST\";\r\nexport const FETCH_SUCCESS = \"FETCH_SUCCESS\";\r\nexport const FETCH_GLOBAL_SUCCESS = \"FETCH_GLOBAL_SUCCESS\";\r\nexport const FETCH_FAILURE = \"FETCH_FAILURE\";\r\n\r\nexport const updateLanguage = lang => ({ type: UPDATE_LANGUAGE, lang: lang });\r\nexport const updateIsStarted = isStarted => ({ type: UPDATE_ISSTARTED, isStarted: isStarted });\r\nexport const updateImageClickedIdx = imageClickedIdx => ({ type: UPDATE_IMAGECLICKEDIDX, imageClickedIdx: imageClickedIdx });\r\nexport const updateProjectItems = projectItems => ({ type: UPDATE_PROJECTITEMS, projectItems: projectItems })\r\nexport const updateCategory = category => ({ type: UPDATE_CATEGORY, category: category })\r\nexport const updatePage = page => ({ type: UPDATE_PAGE, page: page })\r\nexport const updateHideProjects = isHideProjects => ({ type: UPDATE_HIDEPROJECTS, isHideProjects: isHideProjects })\r\n\r\nexport const fetchDataRequest = () => ({ type: FETCH_REQUEST });\r\nexport const fetchDataSuccess = (data) => ({ type: FETCH_SUCCESS, data: data });\r\n// export const fetchGlobalDataSuccess = (data) => ({ type: FETCH_GLOBAL_SUCCESS, data: data});\r\nexport const fetchDataError = () => ({ type: FETCH_FAILURE });\r\n\r\nconst promise = (\r\n  dispatch,\r\n  fetchData,\r\n  cache,\r\n  lang,\r\n  singlePostTitle = null\r\n) => {\r\n  return new Promise(resolve => {\r\n    if (!cache) {\r\n      fetchData(resolve);\r\n    } else {\r\n      if (cache.data) {\r\n        if (cache.lang !== lang) {\r\n          fetchData(resolve);\r\n          console.log(\"-------------------- Different language, fetch again\");\r\n        } else if (\r\n          singlePostTitle !== null &&\r\n          cache.data.uid !== singlePostTitle\r\n        ) {\r\n          dispatch(fetchDataSuccess({})); // clear data\r\n          fetchData(resolve); // fetch again\r\n          console.log(\r\n            \"-------------------- But different single post title, fetch again\"\r\n          );\r\n        } else {\r\n          // dispatch(fetchDataSuccess(pageName,cache.data));\r\n          resolve(cache.data);\r\n          console.log(\"-------------------- Used cache data\");\r\n        }\r\n      }\r\n    }\r\n  }).catch(function (e) {\r\n    console.log(e);\r\n  });\r\n};\r\n\r\n// export const fetchGlobalData = () => (dispatch, getState) => {\r\n//   const state = getState();\r\n//   let { lang } = state;\r\n\r\n//   fetch('http://dev.ioiocreative.com/HKSTP/cms/api')\r\n//     .then(response => response.json())\r\n//     .then(data => {\r\n//       const results = data.content[lang]['global'];\r\n//       // const results = siteData[lang]['global'];\r\n//       dispatch(fetchGlobalDataSuccess(results));\r\n//     })\r\n// }\r\n\r\nexport const fetchAllData = () => (dispatch, getState) => {\r\n  const state = getState();\r\n  const cache = myCache.get(`data`);\r\n  let { lang } = state;\r\n\r\n  if (!cache) console.log(`-------------------- Data No Cache`);\r\n  else console.log(`-------------------- Data Cached`);\r\n\r\n  const fetchData = resolve => {\r\n\r\n    // start message\r\n    dispatch(fetchDataRequest());\r\n\r\n    // const path = ReactIsInDevMode() ? '//dev.ioiocreative.com/HKSTP/cms/api' : '/HKSTP/cms/api';\r\n    // fetch(path, {\r\n    //   headers: {\r\n    //     'Content-Type': 'application/json',\r\n    //     'Accept': 'application/json'\r\n    //   }\r\n    // })\r\n    //   .then(response => response.json())\r\n    //   .then(data => {\r\n    const results = siteData;\r\n    // const results = siteData;\r\n\r\n    // save data to store\r\n    dispatch(fetchDataSuccess(results));\r\n\r\n    // // put data to cache\r\n    // myCache.put(`data`, {\r\n    //   data: results,\r\n    //   lang: lang\r\n    // });\r\n    // console.log(`-------------------- Data has been Cached`);\r\n    // console.log(`-------------------- Client cache:`, myCache.keys());\r\n\r\n    // resolve(results);\r\n    // });\r\n\r\n    // save data to server\r\n    // fetch(`http://localhost:3000/${lang}/api?keyname=${pageName}Data`, {\r\n    //   method: \"POST\",\r\n    //   body: JSON.stringify(results),\r\n    //   headers: { \"Content-Type\": \"application/json\" }\r\n    // }).catch(function(error) {\r\n    //   console.log(\"Error:\", error.message);\r\n    //   throw error;\r\n    // });\r\n\r\n    // console.log(pageName, siteData[lang][pageName]);\r\n  };\r\n\r\n  return promise(dispatch, fetchData, cache, lang);\r\n};\r\n\r\n//\r\n// Reducer\r\n//\r\nconst initialState = {\r\n  lang: \"en\",\r\n  deviceType: \"desktop\",\r\n  isMobile: false,\r\n  isStarted: false,\r\n  imageClickedIdx: null,\r\n  category: '',\r\n  page: 'home',\r\n  isHideProjects: false,\r\n\r\n  homeData: null,\r\n  projectsData: null,\r\n  projectSingleData: null\r\n};\r\nconst reducer = (state = initialState, action) => {\r\n  console.log(\"                     !!!\", action.type, \"!!!\");\r\n  switch (action.type) {\r\n    case UPDATE_LANGUAGE:\r\n      return { ...state, lang: action.lang };\r\n\r\n    case UPDATE_ISSTARTED:\r\n      return { ...state, isStarted: action.isStarted };\r\n\r\n    case UPDATE_IMAGECLICKEDIDX:\r\n      return { ...state, imageClickedIdx: action.imageClickedIdx };\r\n\r\n    case UPDATE_PROJECTITEMS:\r\n      return { ...state, projectItems: action.projectItems };\r\n\r\n    case UPDATE_CATEGORY:\r\n      return { ...state, category: action.category }\r\n\r\n    case UPDATE_PAGE:\r\n      return { ...state, page: action.page }\r\n\r\n    case UPDATE_HIDEPROJECTS:\r\n      return { ...state, isHideProjects: action.isHideProjects }\r\n\r\n    // case FETCH_GLOBAL_SUCCESS:\r\n    //   return { ...state, globalData: action.data }\r\n\r\n    case FETCH_SUCCESS:\r\n      return { ...state, data: action.data.content, langData: action.data.languages }\r\n    // switch (action.pageName) {\r\n    // case \"home\":\r\n    //   return { ...state, homeData: action.data };\r\n    // case \"projects\":\r\n    //   return { ...state, projectsData: action.data };\r\n    // case \"about\":\r\n    //   return { ...state, aboutData: action.data };\r\n\r\n    //   default:\r\n    //     return state;\r\n    // }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport { connectRouter, routerMiddleware } from \"connected-react-router\";\r\nimport thunk from \"redux-thunk\";\r\nimport { createBrowserHistory, createMemoryHistory } from \"history\";\r\nimport rootReducer from \"./reducers\";\r\n\r\n// A nice helper to tell us if we're on the server\r\nexport const isServer = !(\r\n  typeof window !== \"undefined\" &&\r\n  window.document &&\r\n  window.document.createElement\r\n);\r\n\r\nexport default (url = \"/\") => {\r\n  // Create a history depending on the environment\r\n  const history = isServer\r\n    ? createMemoryHistory({\r\n        initialEntries: [url]\r\n      })\r\n    : createBrowserHistory({basename: '/HKSTP/'});\r\n\r\n  const enhancers = [];\r\n\r\n  // Dev tools are helpful\r\n  if (process.env.NODE_ENV === \"development\" && !isServer) {\r\n    const devToolsExtension = window.devToolsExtension;\r\n\r\n    if (typeof devToolsExtension === \"function\") {\r\n      enhancers.push(devToolsExtension());\r\n    }\r\n  }\r\n\r\n  const middleware = [thunk, routerMiddleware(history)];\r\n  const composedEnhancers = compose(\r\n    applyMiddleware(...middleware),\r\n    ...enhancers\r\n  );\r\n\r\n  // Do we have preloaded state available? Great, save it.\r\n  const initialState = !isServer ? window.__PRELOADED_STATE__ : {};\r\n\r\n  // Delete it once we have it stored in a variable\r\n  if (!isServer) {\r\n    delete window.__PRELOADED_STATE__;\r\n  }\r\n\r\n  // Create the store\r\n  const store = createStore(\r\n    connectRouter(history)(rootReducer),\r\n    initialState,\r\n    composedEnhancers\r\n  );\r\n\r\n  return {\r\n    store,\r\n    history\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateLanguage, updateCategory, updatePage, updateHideProjects } from \"../../reducers\";\r\nimport { TweenMax, Back } from \"gsap\";\r\n// import smoothScroll from '../pagewrap/scroll';\r\n\r\nclass Nav extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n    this.projectNum = null;\r\n    this.categoryWrap = null;\r\n  }\r\n\r\n  getAnotherLanguage() {\r\n    let currentLang = this.props.lang;\r\n    const location = this.props.location;\r\n\r\n    // if (this.props.projectSingleData)\r\n    //   return location.pathname\r\n    //     .replace(currentLang, currentLang === \"zh\" ? \"en\" : \"zh\");\r\n    // .replace(\r\n    //   this.props.match.params.title,\r\n    //   this.props.projectSingleData.alternate_languages[0].uid\r\n    // );\r\n    // else\r\n    return location.pathname.replace(\r\n      currentLang,\r\n      currentLang === \"zh\" ? \"en\" : \"zh\"\r\n    );\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(this.props.data)\r\n      TweenMax.set(this.categoryWrap, {transitionDelay: '2s'});\r\n  }\r\n  \r\n  componentDidUpdate(prevProps){\r\n      if(prevProps.projectItems.length !== this.props.projectItems.length){\r\n        const p = {num: 0};\r\n        TweenMax.to(p,1,{num: this.projectNum.getAttribute('data-num'), roundProps:\"num\", ease:'Linear.easeNone', onUpdate:()=>{\r\n          this.projectNum.innerText = p.num;\r\n        }})\r\n      }\r\n    if(this.props.data){\r\n      if(prevProps.isStarted !== this.props.isStarted && this.props.isStarted){\r\n        const target = document.querySelector(`#categoryWrap li.active`);\r\n        const offsetLeft = target.offsetLeft;\r\n        \r\n        TweenMax.set(this.projectNum, {x:offsetLeft+target.offsetWidth/2-this.projectNum.offsetWidth/2});\r\n        setTimeout(()=>{\r\n          this.categoryWrap.setAttribute('style','');\r\n        },2000)\r\n      }\r\n\r\n      if(this.props.data['projects']){\r\n        if(prevProps.category === '' && this.props.category === this.props.data['projects'].categories[0].slug)\r\n        {}\r\n        else{\r\n          if(prevProps.category !== this.props.category){\r\n            const idx = this.props.data['projects'].categories.findIndex(v => v.slug === this.props.category)+1;\r\n            const target = document.querySelector(`#categoryWrap li:nth-child(${idx})`);\r\n            const offsetLeft = target.offsetLeft;\r\n            TweenMax.to(this.projectNum, .4, { x:offsetLeft+target.offsetWidth/2-this.projectNum.offsetWidth/2, ease:Back.easeOut.config(1)});\r\n          }\r\n        }\r\n      }\r\n\r\n      if(this.props.page !== 'projects')\r\n        TweenMax.to(this.projectNum, .5, { y:'-100%', autoAlpha:0, ease:'Power4.easeIn'});\r\n      else{\r\n        TweenMax.to(this.projectNum, 1, { delay:.6, y:'0%', autoAlpha:1, ease:'Power4.easeOut'});\r\n      }\r\n    }\r\n  }\r\n\r\n  onClick = () => {\r\n    this.props.dispatch(\r\n      updateLanguage(this.props.lang === \"zh\" ? \"en\" : \"zh\")\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const currentLang = this.props.lang;\r\n    if (this.props.data) {\r\n      const langData = this.props.langData;\r\n      const homeData = this.props.data['home'];\r\n      const projectsData = this.props.data['projects'];\r\n      const globalData = this.props.data['global'];\r\n\r\n      return (\r\n        <>\r\n          <div ref={elem => this.hof = elem} id=\"hof\" className={`fixed cap h3 ${!this.props.isStarted ? 'hide' : ''}`}>\r\n          {\r\n            homeData &&\r\n            homeData.title3.split('').map((value, idx)=>{\r\n              return <span key={idx}>{value === \" \" ? \"\\u00A0\" : value}</span>\r\n            })\r\n          }\r\n          </div>\r\n          <div ref={elem => this.categoryWrap = elem} id=\"categoryWrap\" className={`fixed ${!this.props.isStarted ? 'hide' : this.props.imageClickedIdx !== null ? 'hide' : ''}`}>\r\n            <ul>\r\n            {\r\n              projectsData &&\r\n              projectsData.categories.map((value, idx)=>{\r\n                return <li key={idx} className={this.props.category === value.slug || (this.props.category === '' && idx === 0) ? 'active h3' : 'h3' } \r\n                onClick={()=> {\r\n                  if(this.props.category !== value.slug)\r\n                    this.props.dispatch(updateCategory(value.slug));\r\n\r\n                  if(this.props.page !== 'projects')\r\n                    this.props.dispatch(updatePage('projects'));\r\n\r\n                  if(this.props.isHideProjects)\r\n                    this.props.dispatch(updateHideProjects(false))\r\n                }}>\r\n                  {value.name}\r\n                </li>\r\n              })\r\n            }\r\n              <li className=\"h3\" onClick={()=>{if(this.props.page !== 'about') this.props.dispatch(updatePage('about'))}}>{globalData.about}</li>\r\n              <span ref={elem => this.projectNum = elem} id=\"projectNum\" data-num={this.props.projectItems && this.props.projectItems.length}></span>\r\n            </ul>\r\n          </div>\r\n          <div id=\"logo\" className=\"fixed\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"180.519\" height=\"57.066\" viewBox=\"0 0 511.75 175.64\"><defs><style>{`.cls-1{fill:#ff6e0f;}.cls-2{fill:#056ee1;}`}</style></defs><g id=\"圖層_2\" data-name=\"圖層 2\"><g id=\"圖層_1-2\" data-name=\"圖層 1\"><path className=\"cls-1\" d=\"M398.61,90.6H334.8v85h16.68V147.39h47.13c19.47,0,25.62-6.59,25.62-25.47v-4.1c0-21.07-6.15-27.22-25.62-27.22m9.08,31.76c0,8.35-2.49,11.27-9.08,11.27H351.48V106h47.13c6.59,0,9.08,2.63,9.08,11.56ZM295.86,175.64H279.18V106h-31V90.6h78.74V106h-31Zm-52.4-27.52v2.93c0,18-7.46,24.59-27.66,24.59H155.64V160.42h59c9.07,0,11.71-2.93,11.71-10.54s-2.49-9.81-11.27-9.81H180.53c-20.5,0-26.94-7.17-26.94-22.83v-2.78c0-17,6.74-23.86,27.37-23.86h59.28V106H181c-8.19,0-10.53,3.66-10.53,10.54s2.34,9.66,10.53,9.66h34.11c21.07,0,28.39,6.88,28.39,22M216,50h11.13V48h-9.31V44.77h9.31V42.72h4.41v2.05h9.76V48h-9.76v2h11.59v3.35H216ZM239.35,67.4a5.11,5.11,0,0,1,2.29-.85V63.61c-1.29-.11-3.46.74-5.41,2.14a7.75,7.75,0,0,1-2.16-2.1h1c.76,0,1.52,0,2.27,0a4.29,4.29,0,0,0,1.42-.35,2.74,2.74,0,0,0,1.46-2,9.09,9.09,0,0,0,.17-1.94c0-3.25-1-4.35-4-4.35H218.41v8.69h4.77c-1.7,1.75-4.19,3-7.72,3.8v4a17.52,17.52,0,0,0,9-4.24v.6c0,4.14,1.25,5.84,4.36,5.89a26.08,26.08,0,0,0,4.7-.2V69.79a25.48,25.48,0,0,1-3.45.1c-1,0-1.45-.74-1.45-2.14v-4.1h1.08a18.43,18.43,0,0,0,10.81,8.82v-4.3s-.25,0-1.13-.77m-16.71-6.9V58h12.14c.95,0,1.33.25,1.33,1.3s-.38,1.19-1.33,1.19ZM171.13,75.36a39.25,39.25,0,0,0,10.6-3.75,24.57,24.57,0,0,1-5.82-12.48h4.61A16.78,16.78,0,0,0,185.84,69c3.95-3,6.4-6.47,6.4-10.21,0-.65-.25-.95-1.21-.95H174.37v-4.4h8.34V46h-9.05V41.39h9.05V35.45h4.86v5.94h11.69V46H187.57v7.37h5.75c2.45,0,3.7,1.45,3.7,3.45,0,6.39-2.83,11.11-7.19,14.9A38,38,0,0,0,200,75v5.1c-5.9-1-10.76-2.7-14.46-5.2a47.37,47.37,0,0,1-14.38,5.35Zm-14.25,4.3,0-4.6a13.94,13.94,0,0,0,3.49.35c1.37,0,2-1.1,2-3.3V63a64.78,64.78,0,0,1-6.81,1.75V59.58c2.53-.55,4.69-1.1,6.81-1.7V46h-6.35V41.39h6.35V35.45h4.87v5.94H172V46h-4.65V56.33c1.45-.5,3-1.1,4.69-1.75v4.8c-1.54.7-3.11,1.4-4.69,2V72.56c0,4.9-1.83,7.35-5.32,7.35a49.1,49.1,0,0,1-5.11-.25M124.77,43.74V39.1c5,.95,8.85,2.45,11.56,4.44v5.55c-2.58-2.05-6.45-3.8-11.56-5.35m13.67,25.63c-4.57.6-9.55,1.1-15.08,1.45V65.87a116.06,116.06,0,0,0,15.08-1.4v-29h4.91V63.57c1.24-.2,2.45-.45,3.7-.75v5.1c-1.21.25-2.46.5-3.7.7v11.5h-4.91Zm-14-14.19V50.44c5.24,1.15,9.18,2.84,11.89,5.09V61c-2.58-2.2-6.57-4.15-11.89-5.85m-12.56-6.52h-1.83c0,12-.46,26.76-1.08,30.76h-4.36c.83-6.4,1.54-21.12,1.54-30.76H104V44.07h7.9v-3c-2.29.1-4.7.15-7.19.2V36.8c5.4,0,11.76-.25,19.07-.7v4.55c-2.24.1-4.61.2-7.19.25v3.17h7.82v4.59h-2.12c0,6.94.37,21.62,1.2,30.71h-4.24c-.54-6.05-.83-20.72-.83-30.71h-1.83V80.12h-4.69Zm129.32,31a20.19,20.19,0,0,0,6.3-5.85,26.34,26.34,0,0,0,4.75-15.54,28.21,28.21,0,0,0-2-10.47A22.34,22.34,0,0,0,246,40.94c-1.62-1.74-4.33-4.19-6.86-4.19H209.35V80h31.17Zm2-8.8a13.17,13.17,0,0,1-4.76,4.31H214.3V41.37h21.85a5.41,5.41,0,0,1,2.69.49,10.66,10.66,0,0,1,2,1.3,14.74,14.74,0,0,1,3.28,3.92A22.21,22.21,0,0,1,247,58.29a21.38,21.38,0,0,1-3.78,12.59\"/><path className=\"cls-2\" d=\"M511.75,94.7A13.35,13.35,0,0,1,485.11,96a112,112,0,0,0-10.83-6.15,19.67,19.67,0,0,1-13.17,10.39c-.29,17.42,4.1,34.54,6.15,41.42A14.79,14.79,0,0,1,475,154.56a14.56,14.56,0,0,1-29.12,0,14.39,14.39,0,0,1,7-12.44c2-10.24,3.52-29.56,2.35-41.42a19.32,19.32,0,0,1-16.4-26.64C433.3,71,425.69,67,411.64,64a12.48,12.48,0,0,1-6.88,1.9A13.54,13.54,0,1,1,418.22,52.4v.15c10.54,9.8,16.25,13,23.28,16.83a19.46,19.46,0,0,1,15.37-7.61,19.09,19.09,0,0,1,7.61,1.61c8.19-14.49,16.1-30.45,19.46-42.3a13.23,13.23,0,0,1-1.75-6.74,14.35,14.35,0,1,1,14.49,14.35l-4,4.83a21.28,21.28,0,0,0-1.6,1.9C486,41.71,479,50.2,474,58.4l-.88,1.46c-.88,1.32-1.61,2.64-2.34,4l-1.32,2.63a19,19,0,0,1,6.88,14.78,21.4,21.4,0,0,1-.29,3.22,63,63,0,0,0,12.29,1.47,13.38,13.38,0,0,1,23.42,8.78M148.62,90.6H125.49L86.56,132.32l37.91,43.32h23.12l-38.78-43.32Zm-63.53,85H68.55V139.05H17.91v36.59H1.52v-85H17.91v34.54H68.55V90.6H85.09ZM95.17,49.39H87.09V44.24h6.25V39.65H87.09V35.5H82.23v4.15H74.74v-4.1H69.92v4.1H64.16v4.59h5.76v5.15H63.2v4.69h6a12,12,0,0,1-6,5.3v4.54a17.92,17.92,0,0,0,4.16-1.74v9.18c0,5.85,2.2,7.9,7.85,8.1,6.11.2,11.94.2,18.05-.15v-4.7c-6,.3-11.73.4-17.72.2-2.57-.1-3.32-1-3.32-3.84H83.16c5.19,0,6.86-1.55,6.86-6.4a11.4,11.4,0,0,0-.3-2.89,19.06,19.06,0,0,0,5.45,2.74v-5a12.61,12.61,0,0,1-6.94-5.35h6.94ZM74.74,44.24h7.49v5.15H74.74Zm8.17,22.38H72.22v-4.2H82.91c1.58,0,2.16.35,2.16,2.15s-.58,2.05-2.16,2.05m.25-8.44H71.89a18.24,18.24,0,0,0,2.36-4.1h8.62a19.8,19.8,0,0,0,3.07,4.3,15.14,15.14,0,0,0-2.78-.2M52,41.9v-5a46.68,46.68,0,0,1,9.68,4.2v5.44A44.23,44.23,0,0,0,52,41.9m-.17,10.88V47.69a52.32,52.32,0,0,1,9.85,4.49v5.5a46.79,46.79,0,0,0-9.85-4.9m-.2,19.38c2.28-2.59,4-6.29,5.15-12h5A32,32,0,0,1,51.61,79.91ZM42.73,45.27H24.43V41.55c6.9-.1,12.3-.3,16.81-.6V36.1C34.07,36.7,22,37,3,37v4.84c6.07,0,11.51,0,16.46-.14v3.62H.08V50H10.76c-2.08,3.7-5.65,6.17-10.76,8v5.19a39.73,39.73,0,0,0,5.4-2.19V79.51H31.46c5.23,0,7.89-2.1,8.14-8.4,0-1.09,0-2.19,0-3.29-.25-6.3-2.91-8.39-8.14-8.39H7.94c3.86-2.55,6.69-5.52,8.31-9.47h3.24v8.37h4.94V50h2.3c3.28,6.65,8.6,10.92,15.92,13.36V57.63A19.88,19.88,0,0,1,31.8,50H42.73ZM10.26,63.77h21A3.16,3.16,0,0,1,34.66,67v.1H10.26Zm0,7.59h24.4v.4A3.16,3.16,0,0,1,31.21,75h-21Z\"/></g></g></svg>\r\n          </div>\r\n          <div id=\"touchToStart\" className={`fixed ${this.props.isStarted ? 'hide' : ''}`}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"51.991\" height=\"67.44\" viewBox=\"0 0 51.991 67.44\">\r\n              <g id=\"Group_3\" transform=\"translate(-546 -295.021)\">\r\n                <path id=\"Path_2\" d=\"M578.64,360.611l-2.026,1.849a5.214,5.214,0,0,1-.649-.487q-6.645-6.633-13.282-13.274a5.543,5.543,0,0,1-1.629-4.06c-.643-.36-1.271-.7-1.885-1.057a25.782,25.782,0,0,1-12.189-15.67,24.371,24.371,0,0,1-.483-11.723A25.642,25.642,0,0,1,561.469,297.3a24.166,24.166,0,0,1,13.205-2.105,25.483,25.483,0,0,1,19.615,12.523,25.8,25.8,0,0,1-2.411,29.989,2.906,2.906,0,0,0-.777,2.072c.041,2.488,0,4.977.026,7.464a2.054,2.054,0,0,1-.685,1.634,21.912,21.912,0,0,1-2.1,1.859c-.277-4.294-.126-8.545-.223-12.826L573.9,331.717c-.032-.337-.087-.66-.088-.984q-.012-4.425-.005-8.85a1.61,1.61,0,0,0-1.017-1.722,1.529,1.529,0,0,0-2.114,1.172,4.234,4.234,0,0,0-.065.917q0,10.62,0,21.241c0,.3-.041.6-.069.98h-2.866v-3.882l-.285-.147a38.109,38.109,0,0,0-3.172,3.657,2.035,2.035,0,0,0,.6,2.574q1.768,1.769,3.533,3.54,4.761,4.762,9.522,9.525C578.123,359.985,578.338,360.264,578.64,360.611Zm11.2-25.17A22.984,22.984,0,1,0,549,322.187c.442,9.548,6.89,17,12.894,19.386l2.938-2.722a19.257,19.257,0,0,1-8.761-7.133,19.258,19.258,0,0,1,.074-21.484A19.144,19.144,0,0,1,582,304.646a18.472,18.472,0,0,1,8.692,12,18.907,18.907,0,0,1-4.317,17.145,1.918,1.918,0,0,0,.344.286C587.748,334.532,588.779,334.978,589.84,335.441Zm-22.269-2.768a12.428,12.428,0,1,1,10.047-22.7,11.68,11.68,0,0,1,6.1,7.013c1.755,5.487.177,10.106-4.161,13.982l3.714,1.608c.172-.125,4.807-6.8,4.966-10.892a15.976,15.976,0,0,0-4.415-11.769,16.2,16.2,0,0,0-27.516,15.125,16.106,16.106,0,0,0,10.147,11.236,4.8,4.8,0,0,0,1.116.139Zm.052-3.389c.018-.384.042-.682.043-.979,0-2.283-.027-4.566.012-6.849a4.6,4.6,0,0,1,4.619-4.431,4.506,4.506,0,0,1,4.389,4.466c.017,2.232,0,4.463.008,6.7,0,.288.043.577.069.9,2.687-1.2,5.688-5.538,4.439-10.373a9.494,9.494,0,0,0-18.638,1.266C562.035,323.426,564.5,328.165,567.623,329.283Z\"/>\r\n              </g>\r\n            </svg>\r\n          </div>\r\n          <div id=\"shortDes\" className={`fixed h3 ${this.props.isStarted ? 'hide' : ''}`} dangerouslySetInnerHTML={{__html: homeData.shortDes }}></div>\r\n          \r\n          {/* <Link id=\"langBtn\"  className=\"fixed\"\r\n            to={this.getAnotherLanguage()}\r\n            onClick={this.onClick}\r\n          >\r\n            {langData && currentLang === \"zh\" ? langData[0].shortDisplay : langData[1].shortDisplay}\r\n          </Link> */}\r\n          <a id=\"langBtn\" className=\"fixed\" target=\"_self\"\r\n            href={'/HKSTP'+this.getAnotherLanguage()}\r\n          >\r\n            {langData && currentLang === \"zh\" ? langData[0].shortDisplay : langData[1].shortDisplay}\r\n          </a>\r\n        </>\r\n      );\r\n    }\r\n    return <></>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang,\r\n    isStarted: state.isStarted,\r\n    data: state.data ? state.data[state.lang] : null,\r\n    langData: state.langData ? state.langData : null,\r\n    projectItems: state.projectItems || [],\r\n    category: state.category,\r\n    imageClickedIdx: state.imageClickedIdx,\r\n    page: state.page,\r\n    isHideProjects: state.isHideProjects\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Nav);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { TimelineMax, TweenMax } from \"gsap\";\r\n// import { fetchDataBy, fetchDataSuccess } from \"../../reducers\";\r\nimport \"../../sass/page/home.scss\";\r\n\r\nclass Home extends Component {\r\n  static pageName = \"home\";\r\n\r\n  static propTypes = {\r\n    lang: PropTypes.string\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.pageName = Home.pageName;\r\n    this.state = {};\r\n    this.titleSpan = [];\r\n    this.cloneTitle = null;\r\n    this.done = false;\r\n  }\r\n\r\n  textAnim(){\r\n    if (this.props.data && !this.done) {\r\n      this.titleSpan = this.titleSpan.filter((el)=>{return el != null;});\r\n      const tl = new TimelineMax({ delay:.8 });\r\n      for(let i=0; this.titleSpan[i]; i++){\r\n        const value = this.titleSpan[i];\r\n        const xory = Math.round(Math.random());\r\n        value.style.willChange = \"transform\";\r\n        const time = Math.random() * 0.5 + 0.8;\r\n        xory === 0 ? \r\n          tl.fromTo( value, time , { x: Math.round(Math.random()) * 200 - 100 + \"%\", autoAlpha:0 },{ x: 0 + \"%\", autoAlpha:1, overwrite:'all', ease: \"Expo.easeOut\",\r\n            onComplete: () => {\r\n              value.style.willChange = \"\";\r\n            }\r\n          },Math.random())\r\n        : \r\n          tl.fromTo(value, time,{ x: 0 + \"%\", y: Math.round(Math.random()) * 200 - 100 + \"%\", autoAlpha:0 },{ y: 0 + \"%\", autoAlpha:1, overwrite:'all', ease: \"Expo.easeOut\",\r\n            onComplete: () => {\r\n              value.style.willChange = \"\";\r\n            }\r\n          },Math.random());\r\n      }\r\n      this.done = true;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.textAnim();\r\n  //   if (!this.props.homeData && this.props.match.params.lang === this.props.lang) {\r\n  //     this.props.dispatch(fetchDataBy(this.pageName));\r\n  //   }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps){\r\n    if (nextProps.lang !== this.props.lang && this.props.data && !this.props.isStarted) {\r\n      if(this.cloneTitle)\r\n        this.cloneTitle = null;\r\n      this.cloneTitle = document.querySelector('#title > h1').cloneNode(true);\r\n      this.cloneTitle.className = this.props.lang;\r\n      document.querySelector('#title').appendChild(this.cloneTitle);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if(prevProps.data !== this.props.data)\r\n      this.textAnim();\r\n\r\n    if(prevProps.lang !== this.props.lang && !this.props.isStarted){\r\n\r\n      this.done = false;\r\n      \r\n      if(this.cloneTitle){\r\n        TweenMax.fromTo(this.cloneTitle.querySelectorAll('span > span'),.8, {y:0}, {y:'-100%',ease:'Power4.easeInOut',\r\n          onComplete: ()=>{\r\n            this.cloneTitle.remove();\r\n          }\r\n        })\r\n      }\r\n      TweenMax.set(this.titleSpan, {y:'0%'});\r\n      this.textAnim();\r\n    }\r\n    else{\r\n      if(prevProps.isStarted && !this.props.isStarted){\r\n        this.done = false;\r\n        TweenMax.set(this.titleSpan, {y:'0%'});\r\n      }\r\n      this.textAnim();\r\n    }\r\n\r\n    if(prevProps.isStarted !== this.props.isStarted && this.props.isStarted){\r\n      TweenMax.to(this.titleSpan, 1.3, {y:'-100%', overwrite:'all', ease:'Power4.easeInOut'});\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    this.titleSpan = [];\r\n    if (this.props.data) {\r\n      const data = this.props.data['home'];\r\n      let i = 0;\r\n\r\n      return (\r\n        <div id=\"home\" className={this.props.page}>\r\n          <div id=\"title\">\r\n            <h1 className=\"cap\">\r\n              <div className=\"blue\">\r\n                {data.title1.split(\"\").map((value, idx) => {\r\n                  return (\r\n                    <span key={idx}>\r\n                      <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                        {value}\r\n                      </span>\r\n                    </span>\r\n                  );\r\n                })}\r\n              </div>\r\n              <div>\r\n                {data.title2.split(\"\").map((value, idx) => {\r\n                  return (\r\n                    <span key={idx} className=\"orange\">\r\n                      <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                        {value}\r\n                      </span>\r\n                    </span>\r\n                  );\r\n                })}\r\n                <h1 className=\"cap\">\r\n                  {data.title3.split(\"\").map((value, idx) => {\r\n                    return (\r\n                      <span key={idx}>\r\n                        <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                          {value === \" \" ? \"\\u00A0\" : value}\r\n                        </span>\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </h1>\r\n              </div>\r\n            </h1>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return <h5 className=\"loading\">Loading...</h5>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang,\r\n    data: state.data ? state.data[state.lang] : null,\r\n    isStarted: state.isStarted,\r\n    page: state.page\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Home);\r\n","const FrameImpulse = (function() {\r\n  var vendors = [\"webkit\", \"moz\"];\r\n\r\n  var r = {};\r\n  var listeners = [],\r\n    numListeners = 0,\r\n    toRemove = [],\r\n    numToRemove;\r\n  var lastTime = 0;\r\n\r\n  for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\r\n    window.requestAnimationFrame = window[vendors[i] + \"RequestAnimationFrame\"];\r\n  }\r\n\r\n  if (!window.requestAnimationFrame) {\r\n    window.requestAnimationFrame = function(callback) {\r\n      var currTime = new Date().getTime();\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      var id = window.setTimeout(function() {\r\n        callback(currTime + timeToCall);\r\n      }, timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n  }\r\n\r\n  var run = function(deltaTime) {\r\n    requestAnimationFrame(run);\r\n\r\n    if (numListeners === 0) return;\r\n\r\n    for (var i = 0; i < numListeners; i++) {\r\n      listeners[i].call(deltaTime);\r\n    }\r\n\r\n    if (numToRemove > 0) {\r\n      var indexToRemove = [];\r\n      for (let i = listeners.length - 1; i >= 0; i--) {\r\n        for (var j = 0; j < toRemove.length; j++) {\r\n          if (listeners[i] === toRemove[j]) indexToRemove.push(i);\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < indexToRemove.length; i++) {\r\n        listeners.splice(indexToRemove[i], 1);\r\n      }\r\n\r\n      numListeners = listeners.length;\r\n      toRemove = [];\r\n      numToRemove = 0;\r\n    }\r\n  };\r\n\r\n  r.on = function(f) {\r\n    document.body.scrollTo(0, 0);\r\n    if (listeners.indexOf(f) > -1) {\r\n      return;\r\n    }\r\n    listeners.push(f);\r\n    numListeners = listeners.length;\r\n    // console.log(\"FrameImpulse > new listener > total :\", numListeners);\r\n  };\r\n\r\n  r.off = function(f) {\r\n    //toRemove.push(f);\r\n    //numToRemove = toRemove.length;\r\n    var i = listeners.indexOf(f);\r\n    if (i === -1) return;\r\n    listeners.splice(i, 1);\r\n    numListeners = listeners.length;\r\n    // console.log(\"FrameImpulse > scheduled removal > total :\", numListeners);\r\n  };\r\n\r\n  r.getListeners = function() {\r\n    return listeners;\r\n  };\r\n\r\n  run();\r\n  return r;\r\n})();\r\n\r\nvar VirtualScroll = (function(document) {\r\n  var vs = {};\r\n\r\n  var numListeners,\r\n    listeners = [],\r\n    initialized = false;\r\n\r\n  var touchStartX, touchStartY;\r\n\r\n  // [ These settings can be customized with the options() function below ]\r\n  // Mutiply the touch action by two making the scroll a bit faster than finger movement\r\n  var touchMult = 2;\r\n  // Firefox on Windows needs a boost, since scrolling is very slow\r\n  var firefoxMult = 15;\r\n  // How many pixels to move with each key press\r\n  var keyStep = 120;\r\n  // General multiplier for all mousehweel including FF\r\n  var mouseMult = 1;\r\n\r\n  var bodyTouchAction;\r\n\r\n  var hasWheelEvent = \"onwheel\" in document;\r\n  var hasMouseWheelEvent = \"onmousewheel\" in document;\r\n  var hasTouch = \"ontouchstart\" in document;\r\n  var hasKeyDown = \"onkeydown\" in document;\r\n\r\n  var hasTouchWin =\r\n    navigator.msMaxTouchPoints && navigator.msMaxTouchPoints > 1;\r\n  var hasPointer = !!window.navigator.msPointerEnabled;\r\n\r\n  var isFirefox = navigator.userAgent.indexOf(\"Firefox\") > -1;\r\n\r\n  var event = {\r\n    y: 0,\r\n    x: 0,\r\n    deltaX: 0,\r\n    deltaY: 0,\r\n    originalEvent: null\r\n  };\r\n\r\n  var k = {\r\n    left: 37,\r\n    right: 39,\r\n    up: 38,\r\n    down: 40\r\n  };\r\n\r\n  vs.on = function(f) {\r\n    if (!initialized) initListeners();\r\n\r\n    var i = listeners.indexOf(f);\r\n    if (i !== -1) return;\r\n\r\n    listeners.push(f);\r\n    numListeners = listeners.length;\r\n  };\r\n\r\n  /**\r\n   *\t@method options\r\n   *\t@memberof VirtualScroll\r\n   *\t@static\r\n   *\r\n   *\t@param {Object} opt - object literal containing one or more options from the list above, specified as properties.\r\n   *\r\n   *\t@description Sets custom parameters to the VirtualScroll (globally). The following options are supported:\r\n   *\r\n   *\t<ul>\r\n   *\t<li>touchMult (default: 2) - mutiply the touch action to make the scroll a faster/slower than finger movement</li>\r\n   *\t<li>firefoxMult (defailt: 15)- Firefox on Windows needs a boost, since scrolling is very slow</li>\r\n   *\t<li>keyStep (default: 120) - specified how many pixels to move with each key press</li>\r\n   *\t<li>mouseMult (default: 1) - general multiplier for all mousehweel events including FF</li>\r\n   *\t</ul>\r\n   */\r\n  vs.options = function(opt) {\r\n    keyStep = opt.keyStep || 120;\r\n    firefoxMult = opt.firefoxMult || 15;\r\n    touchMult = opt.touchMult || 2;\r\n    mouseMult = opt.mouseMult || 1;\r\n  };\r\n\r\n  vs.off = function(f) {\r\n    var i = listeners.indexOf(f);\r\n    if (i === -1) return;\r\n\r\n    listeners.splice(i, 1);\r\n    numListeners = listeners.length;\r\n    if (numListeners <= 0) destroyListeners();\r\n  };\r\n\r\n  /**\r\n   *\t@method lockTouch\r\n   *\t@memberof VirtualScroll\r\n   *\t@static\r\n   *\r\n   *\t@description For VirtualScroll to work on mobile, the default swipe-to-scroll behavior needs to be turned off.\r\n   *\tThis function will take care of that, however it's a failt simple mechanism - see in the source code, linked below.\r\n   */\r\n  vs.lockTouch = function() {\r\n    document.addEventListener(\"touchmove\", function(e) {\r\n      e.preventDefault();\r\n    });\r\n  };\r\n\r\n  var notify = function(e) {\r\n    event.x += event.deltaX;\r\n    event.y += event.deltaY;\r\n    event.originalEvent = e;\r\n\r\n    for (var i = 0; i < numListeners; i++) {\r\n      listeners[i](event);\r\n    }\r\n  };\r\n\r\n  var onWheel = function(e) {\r\n    // In Chrome and in Firefox (at least the new one)\r\n    event.deltaX = (e.wheelDeltaX || e.deltaX) || (e.wheelDeltaY || e.deltaY) * -1;\r\n    event.deltaY = e.wheelDeltaY || e.deltaY * -1;\r\n\r\n    // for our purpose deltamode = 1 means user is on a wheel mouse, not touch pad\r\n    // real meaning: https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent#Delta_modes\r\n    if (isFirefox && e.deltaMode === 1) {\r\n      event.deltaX *= firefoxMult;\r\n      event.deltaY *= firefoxMult;\r\n    }\r\n\r\n    event.deltaX *= mouseMult;\r\n    event.deltaY *= mouseMult;\r\n\r\n    notify(e);\r\n  };\r\n\r\n  var onMouseWheel = function(e) {\r\n    // In Safari, IE and in Chrome if 'wheel' isn't defined\r\n    event.deltaX = e.wheelDeltaX ? e.wheelDeltaX : 0;\r\n    event.deltaY = e.wheelDeltaY ? e.wheelDeltaY : e.wheelDelta;\r\n\r\n    notify(e);\r\n  };\r\n\r\n  var onTouchStart = function(e) {\r\n    var t = e.targetTouches ? e.targetTouches[0] : e;\r\n    touchStartX = t.pageX;\r\n    touchStartY = t.pageY;\r\n  };\r\n\r\n  var onTouchMove = function(e) {\r\n    // e.preventDefault(); // < This needs to be managed externally\r\n    var t = e.targetTouches ? e.targetTouches[0] : e;\r\n\r\n    event.deltaX = (t.pageX - touchStartX) * touchMult;\r\n    event.deltaY = (t.pageY - touchStartY) * touchMult;\r\n\r\n    touchStartX = t.pageX;\r\n    touchStartY = t.pageY;\r\n\r\n    notify(e);\r\n  };\r\n\r\n  var onKeyDown = function(e) {\r\n    // 37 left arrow, 38 up arrow, 39 right arrow, 40 down arrow\r\n    event.deltaX = event.deltaY = 0;\r\n    switch (e.keyCode) {\r\n      case k.left:\r\n        event.deltaX = -keyStep;\r\n        break;\r\n      case k.right:\r\n        event.deltaX = keyStep;\r\n        break;\r\n      case k.up:\r\n        event.deltaY = keyStep;\r\n        break;\r\n      case k.down:\r\n        event.deltaY = -keyStep;\r\n        break;\r\n    }\r\n\r\n    notify(e);\r\n  };\r\n\r\n  var initListeners = function() {\r\n    if (hasWheelEvent) document.addEventListener(\"wheel\", onWheel);\r\n    if (hasMouseWheelEvent)\r\n      document.addEventListener(\"mousewheel\", onMouseWheel);\r\n\r\n    // if (hasTouch) {\r\n      document.addEventListener(\"touchstart\", onTouchStart);\r\n      document.addEventListener(\"touchmove\", onTouchMove);\r\n    // }\r\n\r\n    if (hasPointer && hasTouchWin) {\r\n      bodyTouchAction = document.body.style.msTouchAction;\r\n      document.body.style.msTouchAction = \"none\";\r\n      document.addEventListener(\"MSPointerDown\", onTouchStart, true);\r\n      document.addEventListener(\"MSPointerMove\", onTouchMove, true);\r\n    }\r\n\r\n    if (hasKeyDown) document.addEventListener(\"keydown\", onKeyDown);\r\n\r\n    initialized = true;\r\n  };\r\n\r\n  var destroyListeners = function() {\r\n    if (hasWheelEvent) document.removeEventListener(\"wheel\", onWheel);\r\n    if (hasMouseWheelEvent)\r\n      document.removeEventListener(\"mousewheel\", onMouseWheel);\r\n\r\n    // if (hasTouch) {\r\n      document.removeEventListener(\"touchstart\", onTouchStart);\r\n      document.removeEventListener(\"touchmove\", onTouchMove);\r\n    // }\r\n\r\n    if (hasPointer && hasTouchWin) {\r\n      document.body.style.msTouchAction = bodyTouchAction;\r\n      document.removeEventListener(\"MSPointerDown\", onTouchStart, true);\r\n      document.removeEventListener(\"MSPointerMove\", onTouchMove, true);\r\n    }\r\n\r\n    if (hasKeyDown) document.removeEventListener(\"keydown\", onKeyDown);\r\n\r\n    initialized = false;\r\n  };\r\n\r\n  return vs;\r\n})(document);\r\n\r\n(function(w) {\r\n  //\r\n  // animation frame\r\n  //\r\n  w.requestAnimationFrame =\r\n    w.requestAnimationFrame ||\r\n    w.mozRequestAnimationFrame ||\r\n    w.webkitRequestAnimationFrame ||\r\n    w.msRequestAnimationFrame ||\r\n    function(f) {\r\n      return setTimeout(f, 1000 / 60);\r\n    }; // simulate calling code 60\r\n\r\n  w.cancelAnimationFrame =\r\n    w.cancelAnimationFrame ||\r\n    w.mozCancelAnimationFrame ||\r\n    function(requestID) {\r\n      clearTimeout(requestID);\r\n    }; //fall back\r\n\r\n  //\r\n  // URLSearchParams polyfill\r\n  //\r\n  w.URLSearchParams =\r\n    w.URLSearchParams ||\r\n    function(searchString) {\r\n      var self = this;\r\n      self.searchString = searchString;\r\n      self.get = function(name) {\r\n        var results = new RegExp(\"[?&]\" + name + \"=([^&#]*)\").exec(\r\n          self.searchString\r\n        );\r\n        if (results === null) {\r\n          return null;\r\n        } else {\r\n          return decodeURI(results[1]) || 0;\r\n        }\r\n      };\r\n    };\r\n})(window);\r\n\r\nconst isMobile = function() {\r\n  return window.innerWidth <= 1024;\r\n};\r\n// var isPhone = function(){\r\n// \treturn window.innerWidth < 768;\r\n// }\r\n\r\n//\r\n// Async loading\r\n//\r\n// var loadScript = function(src, callback)\r\n// {\r\n// \tvar s,\r\n// \t\tr,\r\n// \t\tt;\r\n// \t\tr = false;\r\n// \ts = document.createElement('script');\r\n// \ts.type = 'text/javascript';\r\n// \ts.src = src;\r\n// \ts.onload = s.onreadystatechange = function() {\r\n// \t\t//console.log( this.readyState ); //uncomment this line to see which ready states are called.\r\n// \t\tif ( !r && (!this.readyState || this.readyState === 'complete') )\r\n// \t\t{\r\n// \t\t\tr = true;\r\n// \t\t\tcallback();\r\n// \t\t}\r\n// \t};\r\n// \tt = document.getElementsByTagName('script')[0];\r\n// \tt.parentNode.insertBefore(s, t);\r\n// }\r\n\r\n//\r\n// Random\r\n//\r\n// var random = function( min , max , isRound ){\r\n// \tvar ran = (Math.random() * (max - min)) + min;\r\n// \tif(isRound)\r\n// \t\treturn Math.round(ran);\r\n// \telse\r\n// \t\treturn ran;\r\n// }\r\n\r\n//\r\n// Add, Remove and Has Class\r\n//\r\nvar hasClass = function(el, className) {\r\n  if (el.classList) return el.classList.contains(className);\r\n  else\r\n    return !!el.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\r\n};\r\n\r\nvar addClass = function(el, className) {\r\n  if (el.classList) el.classList.add(className);\r\n  else if (!hasClass(el, className)) el.className += \" \" + className;\r\n};\r\n\r\nvar removeClass = function(el, className) {\r\n  var isNodelist =\r\n    typeof el.length != \"undefined\" && typeof el.item != \"undefined\";\r\n  if (isNodelist) {\r\n    var els = el;\r\n\r\n    for (var i = 0; els[i]; i++) {\r\n      if (els[i].classList) els[i].classList.remove(className);\r\n      else if (hasClass(els[i], className)) {\r\n        let reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\r\n        els[i].className = els[i].className.replace(reg, \" \");\r\n      }\r\n    }\r\n  } else {\r\n    if (el.classList) el.classList.remove(className);\r\n    else if (hasClass(el, className)) {\r\n      let reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\r\n      el.className = el.className.replace(reg, \" \");\r\n    }\r\n  }\r\n};\r\n\r\n//\r\n// Add and Remove Event\r\n//\r\nvar addEvent = function(obj, type, callback) {\r\n  if (obj === null || typeof obj === \"undefined\") return;\r\n\r\n  if (obj.addEventListener) obj.addEventListener(type, callback, false);\r\n  else if (obj.attachEvent) obj.attachEvent(\"on\" + type, callback);\r\n  else obj[\"on\" + type] = callback;\r\n};\r\nvar removeEvent = function(obj, type, func) {\r\n  if (obj.removeEventListener) obj.removeEventListener(type, func, false);\r\n};\r\n\r\nvar setTranslate = function(elem, x, y, z) {\r\n  elem.style.webkitTransform = \"translate3d(\" + x + \",\" + y + \",\" + z + \")\";\r\n  elem.style.msTransform = \"translate3d(\" + x + \",\" + y + \",\" + z + \")\";\r\n  elem.style.transform = \"translate3d(\" + x + \",\" + y + \",\" + z + \")\";\r\n};\r\n\r\n//\r\n//  Virtual Scroll\r\n//\r\nvar SmoothScroll = function(elem, scrollFunc) {\r\n  var _this = this;\r\n\r\n  // Grab both red boxes\r\n  this.elem = document.querySelector(elem);\r\n\r\n  // Check how much we can scroll. This value is the\r\n  // height of the scrollable element minus the height of the widow\r\n  var fullElemHeight = this.elem.getBoundingClientRect().height;\r\n  var elemWidth;// = this.elem.getBoundingClientRect().width - this.elem.;\r\n  var elemHeight;// = this.elem.getBoundingClientRect().height - window.innerHeight;\r\n\r\n  // Add easing to the scroll. Play with this value to find a setting that you like.\r\n  var ease = 0.1;\r\n  var mult = 1;\r\n\r\n  // Store current scroll position\r\n  var targetX = 0,\r\n    targetY = 0;\r\n  var currentX = 0,\r\n    currentY = 0;\r\n\r\n  // scroll bar padding\r\n  var showScrollBar = false;\r\n  var padding = 3;\r\n\r\n  var disable = false;\r\n  var isSelf = false;\r\n\r\n  var onScroll = function(e) {\r\n    if (!disable && isSelf) {\r\n      // Accumulate delta value on each scroll event\r\n      targetY += e.deltaY * mult;\r\n      targetX += e.deltaX * mult;\r\n\r\n      // Clamp the value so it doesn't go too far up or down\r\n      // The value needs to be between 0 and -elemHeight\r\n      targetX = Math.max(-elemWidth, targetX);\r\n      targetX = Math.min(0, targetX);\r\n      targetY = Math.max(-elemHeight, targetY);\r\n      targetY = Math.min(0, targetY);\r\n    }\r\n  };\r\n\r\n  var onAnim = function() {\r\n    // Make sure this works across different browsers (use the shim or something)\r\n\r\n    // keep at bottom while resizing\r\n    if (-targetX > elemWidth && targetX < 0) targetX = -elemWidth + 1;\r\n    if (-targetY > elemHeight && targetY < 0) targetY = -elemHeight + 1;\r\n    if(_this.elem.getBoundingClientRect().height < _this.elem.parentNode.offsetHeight)\r\n      targetY = 0;\r\n\r\n    // Get closer to the target value at each frame, using ease.\r\n    // Other easing methods are also ok.\r\n    currentX += (targetX - currentX) * ease;\r\n    currentY += (targetY - currentY) * ease;\r\n\r\n\r\n    // Uncomment this line to scroll horizontally\r\n    // currentX += (targetX - currentX) * ease;\r\n\r\n    // Apply CSS style\r\n    setTranslate(\r\n      _this.elem,\r\n      currentX.toFixed(4) + \"px\",\r\n      currentY.toFixed(4) + \"px\",\r\n      0 + \"px\"\r\n    );\r\n\r\n    refresh();\r\n\r\n    if (scrollFunc) scrollFunc(currentY / elemHeight, currentY, elemHeight);\r\n\r\n    if (showScrollBar)\r\n      if (fullElemHeight > _this.elem.parentNode.offsetHeight)\r\n        rePositionScrollBar(currentY);\r\n\r\n    lazyLoad.checkAndShowImg();\r\n  };\r\n\r\n  // detect that if hovered scroll container\r\n  addEvent(_this.elem, \"mouseenter\", function() {\r\n    isSelf = true;\r\n  });\r\n  addEvent(_this.elem, \"mouseleave\", function() {\r\n    isSelf = false;\r\n  });\r\n  addEvent(_this.elem, \"touchstart\", function() {\r\n    isSelf = true;\r\n  });\r\n  addEvent(_this.elem, \"touchend\", function() {\r\n    isSelf = false;\r\n  });\r\n\r\n  var initArrow = function(){\r\n    _this.arrowTop = document.createElement(\"div\");\r\n    _this.arrowBot = document.createElement(\"div\");\r\n    _this.dragIcon = document.createElement(\"div\");\r\n    _this.arrowTop.setAttribute(\"id\", \"arrowTop\");\r\n    _this.arrowBot.setAttribute(\"id\", \"arrowBot\");\r\n    _this.dragIcon.setAttribute(\"id\", \"dragIcon\");\r\n    _this.dragIcon.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"60.171\" height=\"49.946\" viewBox=\"0 0 60.171 49.946\"><path id=\"Path_4\" d=\"M972.107,264.3l-4.348,3.932-4.509-5.479c0,3.01-.169,5.365.046,7.684.228,2.467,1.767,3.508,4.708,3.513q14.24.027,28.482.009h2.971v4.474c-.855.042-1.679.117-2.5.118q-14.495.012-28.99,0c-5.791-.009-9.157-3.283-9.357-9.055a6.215,6.215,0,0,1,0-1.27c1.279-7.363-1.29-12.965-7.218-17.513-3.4-2.608-6.195-6.014-9.217-9.105-3.338-3.414-3.495-7.808-.449-10.846s7.4-2.851,10.828.527c3.01,2.971,5.963,6,9,9.067,7.294-2.888,14.464-5.668,21.578-8.585,1.725-.707,2.87-.6,4.2.83a104.317,104.317,0,0,0,9.176,9.153c2.979,2.505,3.75,5.369,2.883,9.192-.6-.5-1.172-.911-1.665-1.4-3.9-3.891-7.838-7.749-11.645-11.73a2.85,2.85,0,0,0-3.714-.8c-6.569,2.72-13.224,5.232-19.8,7.932a2.886,2.886,0,0,1-3.745-.82c-2.9-3.09-5.95-6.036-8.949-9.03-2.076-2.072-3.73-2.439-4.946-.988-1.64,1.956-.4,3.382,1.006,4.789q11.787,11.77,23.553,23.56A20.457,20.457,0,0,0,972.107,264.3Z\" transform=\"translate(-939.55 -228.616)\"/></svg>';\r\n    addClass(_this.arrowTop, 'arrow');\r\n    addClass(_this.arrowBot, 'arrow');\r\n    addClass(_this.dragIcon,'hide');\r\n    _this.elem.parentNode.appendChild(_this.arrowTop);\r\n    _this.elem.parentNode.appendChild(_this.arrowBot);\r\n    _this.elem.parentNode.appendChild(_this.dragIcon);\r\n    addEvent(_this.arrowTop, \"mousedown\", onMouseDownArrowTop);\r\n    addEvent(_this.arrowBot, \"mousedown\", onMouseDownArrowBot);\r\n  }\r\n\r\n  var onMouseDownArrowTop = function(){\r\n    to(targetY+window.innerHeight);\r\n  }\r\n  var onMouseDownArrowBot = function(){\r\n    to(targetY-window.innerHeight);\r\n  }\r\n\r\n  var initScrollBar = function() {\r\n    _this.oldMouseY = 0;\r\n    _this.scrollBarWrap = document.createElement(\"div\");\r\n    _this.scrollBar = document.createElement(\"div\");\r\n\r\n    _this.scrollBarWrap.setAttribute(\"id\", \"scrollBarWrap\");\r\n    _this.scrollBar.setAttribute(\"id\", \"scrollBar\");\r\n\r\n    addEvent(_this.scrollBar, \"mousedown\", onMouseDownScrollBar);\r\n    addEvent(document, \"mousemove\", onMoveScrollBar);\r\n    addEvent(document, \"mouseup\", onMouseUpScrollBar);\r\n\r\n    _this.scrollBarWrap.appendChild(_this.scrollBar);\r\n    _this.elem.parentNode.appendChild(_this.scrollBarWrap);\r\n  };\r\n\r\n  var rePositionScrollBar = function(y) {\r\n    var scrollBarHeight = (1 - elemHeight / fullElemHeight) * 100;\r\n    _this.scrollBar.style.height = scrollBarHeight + \"%\";\r\n    _this.scrollBarY =\r\n      (_this.elem.parentNode.offsetHeight -\r\n        padding * 2 -\r\n        _this.scrollBar.offsetHeight) *\r\n        (y / elemHeight) -\r\n      padding;\r\n\r\n    // setTranslate( _this.scrollBarWrap , 0+'px' , (-y.toFixed(4)) +'px' , 0+'px' );\r\n    setTranslate(\r\n      _this.scrollBar,\r\n      0 + \"px\",\r\n      -_this.scrollBarY.toFixed(4) + \"px\",\r\n      0 + \"px\"\r\n    );\r\n  };\r\n\r\n  var onMouseDownScrollBar = function(e) {\r\n    e.preventDefault();\r\n    _this.oldMouseY = e.pageY;\r\n    _this.clickedScrollBar = true;\r\n    addClass(this, \"active\");\r\n  };\r\n\r\n  var onMoveScrollBar = function(e) {\r\n    if (_this.clickedScrollBar) {\r\n      var y = _this.oldMouseY - e.pageY;\r\n      targetY += y * (fullElemHeight / _this.elem.parentNode.offsetHeight);\r\n\r\n      targetY = Math.max(-elemHeight, targetY);\r\n      targetY = Math.min(0, targetY);\r\n\r\n      _this.oldMouseY = e.pageY;\r\n    }\r\n  };\r\n\r\n  var onMouseUpScrollBar = function() {\r\n    _this.clickedScrollBar = false;\r\n    removeClass(_this.scrollBar, \"active\");\r\n  };\r\n\r\n  var reset = function() {\r\n    currentY = 0;\r\n    targetY = 0;\r\n  };\r\n\r\n  var refresh = function() {\r\n    if (_this.elem.parentNode != null) {\r\n      fullElemHeight = _this.elem.getBoundingClientRect().height;\r\n      elemWidth = _this.elem.getBoundingClientRect().width - _this.elem.parentNode.offsetWidth;\r\n      elemHeight = _this.elem.getBoundingClientRect().height - _this.elem.parentNode.offsetHeight;\r\n\r\n      if (showScrollBar) {\r\n        if (fullElemHeight > window.innerHeight) {\r\n          if (hasClass(_this.scrollBarWrap, \"hide\"))\r\n            removeClass(_this.scrollBarWrap, \"hide\");\r\n        } else {\r\n          if (!hasClass(_this.scrollBarWrap, \"hide\"))\r\n            addClass(_this.scrollBarWrap, \"hide\");\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  var to = function(y) {\r\n    elemHeight = _this.elem.getBoundingClientRect().height - _this.elem.parentNode.offsetHeight;\r\n    targetY = Math.max(-elemHeight, y);\r\n    targetY = Math.min(0, targetY);\r\n  };\r\n  var set = function(y) {\r\n    currentY = y;\r\n    targetY = y;\r\n  };\r\n\r\n  var isOn = false;\r\n  var on = function() {\r\n    isOn = true;\r\n    refresh();\r\n    onResize();\r\n    VirtualScroll.on(onScroll);\r\n    FrameImpulse.on(onAnim);\r\n  };\r\n\r\n  var off = function() {\r\n    isOn = false;\r\n    VirtualScroll.off(onScroll);\r\n    FrameImpulse.off(onAnim);\r\n  };\r\n\r\n  var onResize = function() {\r\n    if (isMobile()) {\r\n      if (isOn) {\r\n        off();\r\n        setTranslate(_this.elem, 0 + \"px\", 0 + \"px\", 0 + \"px\");\r\n      }\r\n    } else {\r\n      if (!isOn) {\r\n        // reset();\r\n        on();\r\n      }\r\n      if (disable) onEnable();\r\n    }\r\n  };\r\n  var onDisable = function() {\r\n    disable = true;\r\n  };\r\n  var onEnable = function() {\r\n    disable = false;\r\n  };\r\n\r\n  var onShowScrollBar = function() {\r\n    showScrollBar = true;\r\n    removeClass(_this.scrollBarWrap,'hide');\r\n    removeClass(_this.arrowTop,'hide');\r\n    removeClass(_this.arrowBot,'hide');\r\n    removeClass(_this.dragIcon,'hide');\r\n  };\r\n  var onHideScrollBar = function() {\r\n    showScrollBar = false;\r\n    addClass(_this.scrollBarWrap,'hide');\r\n    addClass(_this.arrowTop,'hide');\r\n    addClass(_this.arrowBot,'hide');\r\n    addClass(_this.dragIcon,'hide');\r\n  };\r\n\r\n  var init = function() {\r\n    initScrollBar();\r\n    initArrow();\r\n    addEvent(window, \"resize\", onResize);\r\n  };\r\n\r\n  init();\r\n\r\n  return {\r\n    reset: reset,\r\n    refresh: refresh,\r\n    onResize: onResize,\r\n    set: set,\r\n    to: to,\r\n    on: on,\r\n    off: off,\r\n    disable: onDisable,\r\n    enable: onEnable,\r\n    showScrollBar: onShowScrollBar,\r\n    hideScrollBar: onHideScrollBar\r\n  };\r\n};\r\n\r\n//\r\n// LazyLoad img when image in viewport\r\n//\r\nvar LazyLoad = function() {\r\n  var _this = this;\r\n\r\n  this.init = function() {\r\n    _this.imgs = document.querySelectorAll(\"[data-src]\");\r\n    _this.checkAndShowImg();\r\n  };\r\n\r\n  this.checkAndShowImg = function() {\r\n    for (let i = 0; _this.imgs[i]; i++) {\r\n      var _img = _this.imgs[i];\r\n      var offsetTop =\r\n        _img.getBoundingClientRect().top -\r\n        window.innerHeight -\r\n        window.innerHeight / 2;\r\n      if (\r\n        offsetTop <= 0 &&\r\n        !hasClass(_img, \"inited\") &&\r\n        !hasClass(_img, \"loaded\")\r\n      ) {\r\n        // (function(){\r\n        var __img = _img;\r\n        var src = __img.getAttribute(\"data-src\");\r\n\r\n        if (__img.tagName !== \"IMG\")\r\n          __img.style.backgroundImage = \"url(\" + src + \")\";\r\n        else __img.setAttribute(\"src\", src);\r\n\r\n        addClass(__img, \"loaded\");\r\n        // })();\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    init: _this.init,\r\n    checkAndShowImg: _this.checkAndShowImg\r\n  };\r\n};\r\nvar lazyLoad = new LazyLoad();\r\nlazyLoad.init();\r\n\r\nexport default SmoothScroll;\r\n\r\n//\r\n//\tstyling console.log\r\n//\r\n// var print = function(state, color, text){\r\n// \tvar text = (typeof text == 'object')? JSON.stringify(text) : text || '';\r\n// \treturn console.log('%c'+state+'%c %s','color:white;background:'+color+';padding:3px 4px 2px 3px;border-radius:3px;','',text);\r\n// }\r\n\r\n//\r\n// init Ajax\r\n//\r\n// var mainWrapId = '#mainWrap';\r\n// var subDir = 'wpstarter';\r\n// var getPageName = function(){\r\n// \tvar page = window.location.pathname.split('/').filter(function(a){return a.indexOf(subDir) < 0}).filter(Boolean);\r\n//     var lvl1 = page[0] ? decodeURIComponent(page[0]) : 'home';\r\n//     var lvl2 = page[1] ? decodeURIComponent(page[1]) : null;\r\n// \tvar lvl3 = page[2] ? decodeURIComponent(page[2]) : null;\r\n//     return {\r\n// \t\tlvl1: lvl1,\r\n// \t\tlvl2: lvl2,\r\n// \t\tlvl3: lvl3\r\n// \t}\r\n// }\r\n// var Ajax = function(options){\r\n// \tvar _this = this;\r\n//     var ignoreString = ['#','/wp-','.pdf','.zip','.rar'];\r\n//     var main = document.querySelector('main');\r\n// \tvar ignorePage = options.ignorePage.split(',');\r\n// \tthis.done = true;\r\n// \tthis.init = null;\r\n\r\n// \t// this.initEventToAtag = function(elem){\r\n// \t// \tvar _this = this;\r\n//     //     var a = elem.querySelectorAll('a.page');\r\n//     //     for(var i=0; a[i]; i++){\r\n//     //         addEvent(a[i], 'click', function(event){\r\n// \t// \t\t\t_this.onClick(event, this.href);\r\n\r\n// \t// \t\t\tif(hasClass(this, 'menu_item')){\r\n// \t// \t\t\t\tremoveClass(document.querySelectorAll('.menu_item'), 'active');\r\n// \t// \t\t\t\taddClass(this, 'active');\r\n// \t// \t\t\t}\r\n//     //         });\r\n//     //     }\r\n//     // }\r\n// \tthis.initEventToAtag(document);\r\n\r\n//     this.onClick = function(event, $this){\r\n//         event.preventDefault();\r\n\r\n//         print('','','');\r\n// \t\tprint('Current Page','#999',_global.CurrentPage);\r\n\r\n// \t\t_this.updateURL($this.href);\r\n\r\n//         ToPage = getPageName().lvl1;\r\n// \t\tprint('Going to','#999',ToPage);\r\n\r\n// \t\tif($this instanceof Element){\r\n// \t\t\tvar getFrom = $this.getAttribute('data-from') || null;\r\n// \t\t\tvar insertTo = $this.getAttribute('data-to') || null;\r\n// \t\t\t_this.init = $this.getAttribute('data-init') || null;\r\n// \t\t}\r\n// \t\t_this.get($this, {}, getFrom, insertTo);\r\n// \t}\r\n\r\n// \tthis.onAnimBeforeAjax = function(getFrom, func){\r\n// \t\tvar elem = getFrom? '#'+getFrom : mainWrapId;\r\n// \t\t// if(!getFrom)\r\n// \t\t\tTweenMax.to(elem,.3,{autoAlpha:0,overwrite:'all',\r\n// \t\t\t\tonComplete:function(){\r\n// \t\t\t\t\tfunc();\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t\t// else\r\n// \t\t// \tfunc();\r\n// \t}\r\n\r\n// \tthis.onAnimAfterAjax = function(elem){\r\n// \t\tvar elem = elem? elem : mainWrapId;\r\n//         TweenMax.to(elem,.3,{autoAlpha:1,overwrite:'all'});\r\n// \t}\r\n\r\n//     this.checkIfSamePage = function(ignore){\r\n// \t\tif(!ignore){\r\n// \t\t\tfor(var i=0; ignorePage[i]; i++){\r\n// \t\t\t\tif(_global.CurrentPage.lvl1 == ignorePage[i])\r\n// \t\t\t\t\treturn true;\r\n// \t\t\t}\r\n// \t\t\tif(_global.CurrentPage.lvl1 == ToPage ){\r\n// \t\t\t\tprint('Page Detection','red', 'Clicked a Same Page!');\r\n// \t\t\t\treturn false;\r\n// \t\t\t}\r\n// \t\t}\r\n\r\n//         return true;\r\n//     }\r\n\r\n//     this.checkIgnoreString = function(url){\r\n//         for(var i=0; ignoreString[i]; i++){\r\n//             if (url.indexOf(ignoreString[i]) >= 0) {\r\n//                 print('Ignore URL','red',url);\r\n//                 return false;\r\n//             }\r\n// \t\t}\r\n\r\n//         return true;\r\n//     }\r\n\r\n//     this.getPageContent = function(data, getFrom){\r\n//         if(!getFrom)\r\n//             data = data.split('<main>')[1].split('</main>')[0];\r\n//         else{\r\n//             var temp = document.createElement('div');\r\n//             temp.innerHTML = data;\r\n//             data = temp.querySelector('#'+getFrom).innerHTML;\r\n//             temp = null;\r\n//         }\r\n\r\n//         return data;\r\n//     }\r\n\r\n//     this.getSiteTitle = function(data){\r\n//         data = data.split('<title>')[1].split('</title>')[0];\r\n//         return data;\r\n//     }\r\n//     this.updateSiteTitle = function(data){\r\n//         document.title = _this.getSiteTitle(data);\r\n//     }\r\n\r\n//     this.updateURL = function(href){\r\n//         var nohttp = href.replace(\"http://\",\"\").replace(\"https://\",\"\");\r\n//         var firstsla = nohttp.indexOf(\"/\");\r\n//         var pathpos = href.indexOf(nohttp);\r\n//         var path = href.substring(pathpos + firstsla);\r\n\r\n//         if (typeof window.history.pushState == \"function\") {\r\n//             var stateObj = { foo: 1000 + Math.random()*1001 };\r\n//             history.pushState(stateObj,'ajax', path);\r\n//         }\r\n//     }\r\n\r\n//     this.insertHTML = function(html, insertTo){\r\n//         var elem,\r\n//             to = document.querySelector('#'+insertTo);\r\n\r\n//         if(to){\r\n// \t\t\telem = to;\r\n// \t\t\telem.innerHTML = html;\r\n// \t\t\t_this.onAnimAfterAjax(elem);\r\n//         \t// elem.insertAdjacentHTML('beforeend', html);\r\n// \t\t\tto = null;\r\n// \t\t}else{\r\n// \t\t\telem = main;\r\n\r\n// \t\t\t// add \"hide\" class after ajax\r\n// \t\t\tvar temp = document.createElement('div');\r\n//             temp.innerHTML = html;\r\n// \t\t\taddClass(temp.querySelector(mainWrapId),'hide');\r\n// \t\t\thtml = temp.innerHTML;\r\n// \t\t\telem.innerHTML = html;\r\n// \t\t}\r\n\r\n// \t\t_this.initEventToAtag(elem);\r\n// \t\tlazyLoad.init();\r\n// \t}\r\n\r\n// \twindow.onpopstate = function(event) {\r\n// \t\tvar url = {href:document.location.toString()};\r\n// \t\tprint('Back to','black',url.href);\r\n// \t\t_this.onClick(event,url);\r\n// \t}\r\n// }\r\n// Ajax.prototype = {\r\n// \tget: function(elem, data, getFrom, insertTo, callback){\r\n// \t\tvar _this = this;\r\n// \t\tvar href = (elem instanceof Element) ? elem.href : elem;\r\n// \t\tif(_this.checkIgnoreString(href)){\r\n// \t\t\tvar ignoreDetection = getFrom && insertTo;\r\n\r\n// \t\t\tif(_this.checkIfSamePage(ignoreDetection)){\r\n// \t\t\t\tif(_global.section){\r\n// \t\t\t\t\tif(elem instanceof Element)\r\n// \t\t\t\t\t\tif(!hasClass(elem,'disableTo'))\r\n// \t\t\t\t\t\t\t_global.section.to(0);\r\n// \t\t\t\t}\r\n// \t\t\t\tif(!ignoreDetection || _this.init) _this.done = false;\r\n// \t\t\t\t_this.init = null;\r\n\r\n// \t\t\t\tprint('Start Ajax','#999',href);\r\n// \t\t\t\t_this.onAnimBeforeAjax(getFrom,function(){\r\n// \t\t\t\t\tvar params = new URLSearchParams(data);\r\n// \t\t\t\t\taxios\r\n// \t\t\t\t\t\t.post(href,params)\r\n// \t\t\t\t\t\t.then(function(response){\r\n// \t\t\t\t\t\t\tprint('Ajax Success','green');\r\n// \t\t\t\t\t\t\t_global.CurrentPage = getPageName();\r\n\r\n// \t\t\t\t\t\t\tvar data = response.data,\r\n// \t\t\t\t\t\t\t\thtml = _this.getPageContent(data,getFrom);\r\n\r\n// \t\t\t\t\t\t\tif(!getFrom)\r\n// \t\t\t\t\t\t\t\t_this.updateSiteTitle(data);\r\n// \t\t\t\t\t\t\t_this.insertHTML(html,insertTo);\r\n// \t\t\t\t\t\t\t_this.onAnimAfterAjax();\r\n\r\n// \t\t\t\t\t\t\tif(callback) callback();\r\n// \t\t\t\t\t\t\tif(!_this.done){\r\n// \t\t\t\t\t\t\t\t_this.done = true;\r\n// \t\t\t\t\t\t\t\t_global.initPage();\r\n// \t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t})\r\n// \t\t\t\t\t\t.catch(function(error){\r\n// \t\t\t\t\t\t\tprint(error.message,'red',error.stack);\r\n// \t\t\t\t\t\t});\r\n// \t\t\t\t});\r\n// \t\t\t}\r\n// \t\t}\r\n// \t},\r\n// \tinitEventToAtag: function(elem){\r\n// \t\tvar _this = this;\r\n// \t\tvar a = elem.querySelectorAll('a.page');\r\n// \t\tfor(var i=0; a[i]; i++){\r\n// \t\t\taddEvent(a[i], 'click', function(event){\r\n// \t\t\t\t_this.onClick(event, this);\r\n\r\n// \t\t\t\tif(hasClass(this, 'menu_item')){\r\n// \t\t\t\t\tremoveClass(document.querySelectorAll('.menu_item'), 'active');\r\n// \t\t\t\t\taddClass(this, 'active');\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t\t}\r\n// \t}\r\n// }\r\n\r\n// var initMagnetize = function(){\r\n// \tvar magnetize = document.querySelectorAll('.magnetize:not(.inited)');\r\n\r\n// \taddEvent(document, 'mousemove', function(event) {\r\n// \t\tif(!isMobile()){\r\n// \t\t\tfor(var i=0; magnetize[i]; i++){\r\n// \t\t\t\tif(!hasClass(magnetize[i], 'inited'))\r\n// \t\t\t\t\taddClass(magnetize[i], 'inited');\r\n\r\n// \t\t\t\t(function(_this, e) {\r\n// \t\t\t\t\tvar n,\r\n// \t\t\t\t\tmouseX = e.pageX,\r\n// \t\t\t\t\tmouseY = e.pageY,\r\n// \t\t\t\t\ta = _this,\r\n// \t\t\t\t\tratio = -.5,\r\n// \t\t\t\t\tdist = 20 * (_this.getAttribute('data-dist') || 3) || 120,\r\n// \t\t\t\t\tc = a.getBoundingClientRect().left + a.offsetWidth / 2,\r\n// \t\t\t\t\tu = a.getBoundingClientRect().top + a.offsetHeight / 2,\r\n// \t\t\t\t\tf = ratio * Math.floor(c - mouseX),\r\n// \t\t\t\t\th = ratio * Math.floor(u - mouseY);\r\n// \t\t\t\t\tn = a,\r\n// \t\t\t\t\tMath.floor(Math.sqrt(Math.pow(mouseX - (n.getBoundingClientRect().left + n.offsetWidth / 2), 2) + Math.pow(mouseY - (n.getBoundingClientRect().top + n.offsetHeight / 2), 2))) < dist ? (TweenMax.to(a, 1, {\r\n// \t\t\t\t\t\tforce3D:true,\r\n// \t\t\t\t\t\ty: h,\r\n// \t\t\t\t\t\tx: f,\r\n// \t\t\t\t\t\tease:Power2.easeOut\r\n// \t\t\t\t\t}),\r\n// \t\t\t\t\taddClass(a,'magnet')) : (TweenMax.to(a, .6, {\r\n// \t\t\t\t\t\tforce3D:true,\r\n// \t\t\t\t\t\ty: 0,\r\n// \t\t\t\t\t\tx: 0,\r\n// \t\t\t\t\t\tease:Power2.easeOut\r\n// \t\t\t\t\t}),\r\n// \t\t\t\t\tremoveClass(a,'magnet'))\r\n// \t\t\t\t})(magnetize[i], event);\r\n// \t\t\t};\r\n// \t\t}\r\n// \t});\r\n// }\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n// import Html from \"../../_component/html\";\r\nimport { updateImageClickedIdx, updateProjectItems, updateCategory, updateHideProjects } from \"../../reducers\";\r\nimport \"../../sass/page/projects.scss\";\r\nimport TweenMax, {Back, TimelineMax} from 'gsap';\r\nimport smoothScroll from \"../../_component/scroll\";\r\n\r\nclass Projects extends Component {\r\n  static pageName = \"projects\";\r\n\r\n  static propTypes = {\r\n    lang: PropTypes.string\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.pageName = Projects.pageName;\r\n    this.state = {};\r\n    this.items = [];\r\n    this.projects = null;\r\n    this.scrollWrap = null;\r\n    this.smooth = null;\r\n    this.inScreenItems = [];\r\n    this.clickable = true;\r\n    this.heading = null;\r\n  }\r\n\r\n  // static actions = () => [fetchDataBy(this.pageName)];\r\n\r\n  // static pushData = data => fetchDataSuccess(this.pageName, data);\r\n\r\n  // componentDidMount() {\r\n  //   if (!this.props.projectsData && this.props.match.params.lang === this.props.lang) {\r\n  //     this.props.dispatch(fetchDataBy(this.pageName));\r\n  //   }\r\n  // }\r\n\r\n  // shouldComponentUpdate(nextProps){\r\n  //   if (nextProps.lang !== this.props.lang) {\r\n  //     this.props.dispatch(fetchDataBy(this.pageName));\r\n  //   }\r\n  //   return true;\r\n  // }\r\n\r\n\r\n  getInScreenItems(items){\r\n    const inScreenItems = [];\r\n    for(let i=0; i<items.length; i++){\r\n      const elem = items[i];\r\n      const imageWrap = elem.querySelector('.imageWrap');\r\n      const info = elem.querySelector('.info');\r\n      const elemOffset = elem.getBoundingClientRect();\r\n\r\n      if(elemOffset.top+imageWrap.offsetHeight+imageWrap.offsetTop+info.offsetHeight > 0 && elemOffset.top-imageWrap.offsetHeight < window.innerHeight){\r\n        inScreenItems.push(elem);\r\n      }\r\n    }\r\n    return inScreenItems;\r\n  }\r\n\r\n  slideOutItems(items){\r\n    this.inScreenItems = [];\r\n    this.inScreenItems = this.getInScreenItems(items);\r\n    if(!this.inScreenItems.length)\r\n      this.props.dispatch(updateHideProjects(true))\r\n\r\n    TweenMax.staggerTo(this.inScreenItems, .6, {y:-window.innerHeight*2.5, overwrite:'all', ease:Back.easeIn.config(1)},.04,\r\n    ()=>{\r\n      if(this.props.page !== 'projects' && this.props.isStarted){\r\n        this.props.dispatch(updateHideProjects(true))\r\n      }\r\n    });\r\n  }\r\n\r\n  slideInItems(prevIdx){\r\n    // TweenMax.set(this.projects,{clearProps:'all'});\r\n    TweenMax.staggerFromTo(this.inScreenItems, 1.6, {y:window.innerHeight*2}, {y:0, overwrite:'all', ease:'Expo.easeOut'},.1);\r\n    if(prevIdx)\r\n      TweenMax.set(this.items[prevIdx], {y:0});\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if(prevProps.isStarted !== this.props.isStarted && this.props.isStarted){\r\n      this.clickable = true;\r\n\r\n      TweenMax.staggerFromTo(this.items, 1, {y:window.innerHeight}, {delay:2, y:0, ease:'Expo.easeOut'},.1);\r\n      TweenMax.fromTo(this.heading, 1, {autoAlpha:0, y:20},{delay:2, autoAlpha:1, y:0, ease: 'Power4.easeOut' });\r\n\r\n      if(this.props.data){ \r\n        if(this.smooth){\r\n          this.smooth.off();\r\n          this.smooth.hideScrollBar();\r\n          this.smooth = null;\r\n        }\r\n        this.smooth = new smoothScroll(\"#projects #scrollWrap\", (s, y, h) => {});\r\n        this.smooth.on();\r\n        this.smooth.showScrollBar();\r\n        if(!this.props.category)\r\n          this.props.dispatch(updateCategory(this.props.data['projects'].categories[0].slug));\r\n      }\r\n\r\n      // if(!this.props.projectItems){\r\n        this.props.dispatch(updateProjectItems(this.items));\r\n      // }\r\n    }\r\n\r\n    // changed page\r\n    if(this.props.isStarted){\r\n      // others page\r\n      if(prevProps.page === 'projects' && this.props.page !== 'projects'){\r\n        this.slideOutItems(this.items);\r\n        TweenMax.to(this.heading, .6, {autoAlpha:0, y:-40, overwrite:'all', ease: 'Power3.easeOut' });\r\n        \r\n        // turn off scrolling\r\n        if(this.smooth){\r\n          this.smooth.off();\r\n          this.smooth.hideScrollBar();\r\n          this.smooth = null;\r\n        }\r\n      }\r\n      // projects page\r\n      // else if(prevProps.page !== 'projects' && this.props.page === 'projects'){\r\n      //   this.slideInItems(prevProps.imageClickedIdx);\r\n        \r\n      //   // turn on scrolling\r\n      //   this.smooth.on();\r\n      //   this.smooth.showScrollBar();\r\n      // }\r\n    }\r\n\r\n    // when clicked image\r\n    if(prevProps.imageClickedIdx !== this.props.imageClickedIdx && this.props.imageClickedIdx !== null){\r\n      this.clickable = false;\r\n      const updatedItems = Array.from(this.items);\r\n      updatedItems.splice(this.props.imageClickedIdx, 1);\r\n      // fade out the info\r\n      TweenMax.to(this.items[this.props.imageClickedIdx].querySelector('.info'), .3, {autoAlpha:0, ease: 'Power4.easeOut'});\r\n\r\n      TweenMax.to(this.heading, .6, {autoAlpha:0, y:-40, overwrite:'all', ease: 'Power3.easeOut' });\r\n      // slide out if items are in screen area\r\n      this.slideOutItems(updatedItems);\r\n\r\n      // turn off scrolling\r\n      this.smooth.off();\r\n      this.smooth.hideScrollBar();\r\n    }\r\n\r\n    // when close\r\n    if(prevProps.imageClickedIdx !== null && this.props.imageClickedIdx === null){\r\n      if(this.items[prevProps.imageClickedIdx]){\r\n        const updatedItems = Array.from(this.items);\r\n        updatedItems.splice(prevProps.imageClickedIdx, 1);\r\n\r\n        // slide in to screen area\r\n        this.slideInItems(prevProps.imageClickedIdx);\r\n\r\n        this.clickable = true;\r\n        // fade in the info\r\n        TweenMax.to(this.items[prevProps.imageClickedIdx].querySelector('.info'), .8, {autoAlpha:1, ease: 'Power2.easeOut'\r\n          // onComplete:()=>{\r\n          //   this.clickable = true;\r\n          // }\r\n        });\r\n        TweenMax.fromTo(this.heading, 1, {y:40}, {autoAlpha:1, y:0, ease: 'Power3.easeOut' });\r\n\r\n        // turn on scrolling\r\n        this.smooth.on();\r\n        this.smooth.showScrollBar();\r\n      }\r\n    }\r\n\r\n    // \r\n    // update category\r\n    // update language\r\n    // back to projects page\r\n\r\n    if(prevProps.category !== this.props.category || \r\n      // prevProps.projectsData !== this.props.projectsData ||\r\n      (prevProps.page !== 'projects' && this.props.page === 'projects' && this.props.isStarted)\r\n    ){\r\n      // fade in the info\r\n      if(prevProps.category !== '' && this.props.imageClickedIdx === null){\r\n        if(this.props.page === 'projects'){\r\n          if(this.smooth) \r\n            this.smooth.to(0);\r\n\r\n          // remove null value\r\n          this.items = this.items.filter(function (el) {\r\n            return el !== null;\r\n          });\r\n\r\n          const tl = new TimelineMax();\r\n          tl.set(this.heading, {autoAlpha:0});\r\n          tl.fromTo(this.heading, 1, {y:40},{autoAlpha:1, y:0, ease: 'Power3.easeOut' });\r\n\r\n          // if(prevProps.isHideProjects !== this.props.isHideProjects){\r\n            TweenMax.staggerFromTo(this.items, 1, {y:window.innerHeight}, {y:0, ease:'Expo.easeOut'},.1);\r\n            TweenMax.fromTo(this.heading, 1, {autoAlpha:0, y:40},{autoAlpha:1, y:0, ease: 'Power3.easeOut' });\r\n\r\n            if(this.smooth){\r\n              this.smooth.off();\r\n              this.smooth.hideScrollBar();\r\n              this.smooth = null;\r\n            }\r\n            this.smooth = new smoothScroll(\"#projects #scrollWrap\", (s, y, h) => {});\r\n            // turn on scrolling\r\n            this.smooth.on();\r\n            this.smooth.showScrollBar();\r\n          // }\r\n\r\n          const infos = [];\r\n          for(let i=0; i<this.items.length; i++){\r\n            infos.push(this.items[i].querySelector('.info'));\r\n          }\r\n          TweenMax.staggerFromTo(infos, .6, {autoAlpha: 0}, {delay:.3, autoAlpha: 1, overwrite:'all',ease: 'Power2.easeOut'},.06);\r\n\r\n          this.props.dispatch(updateProjectItems(this.items));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if(!this.props.isStarted || this.props.isHideProjects)\r\n      return (null);\r\n    \r\n    if (this.props.data) {\r\n      const data = this.props.data['projects'];\r\n      const filteredData = [];\r\n      this.items = [];\r\n      \r\n      // filtering data by category\r\n      for(let i=0; i<data.items.length; i++){\r\n        const value = data.items[i];\r\n        if(this.props.category === ''){\r\n          if(value.category.slug === data.categories[0].slug)\r\n            filteredData.push(value);\r\n        }\r\n        else{\r\n          if(value.category.slug === this.props.category) \r\n            filteredData.push(value);\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div ref={elem => this.projects = elem} id=\"projects\">\r\n          <div ref={elem => this.scrollWrap = elem} id=\"scrollWrap\" className={!this.props.isStarted ? 'hide' : ''}>\r\n            <p ref={elem => this.heading = elem} id=\"heading\" className=\"h2\" dangerouslySetInnerHTML={{__html: this.props.category && data.categories[data.categories.findIndex(value=> value.slug === this.props.category)].description }}></p>\r\n            <ul id=\"items\">\r\n              {filteredData.map((value, idx) => {\r\n                return (\r\n                  <li key={idx} ref={elem => this.items[idx] = elem} onClick={()=>{this.clickable && this.props.dispatch(updateImageClickedIdx(idx))}}>\r\n                    <div className=\"info\">\r\n                      <div className=\"logoWrap\"><div className={`logo${value.images.logoresize?' small':''}`} style={{backgroundImage:`url('${value.images.logo}')`,backgroundColor:value.images.logoresize?value.images.logocolor:''}}></div></div>\r\n                      <div className=\"infoWrap\">\r\n                        <div className=\"wrap\">\r\n                          <p className=\"h4\">{value.name}</p>\r\n                          <span className=\"cat h6\">{value.category.name}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"imageWrap\" data-src={value.images.thumbnail}></div>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return <></>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang,\r\n    data: state.data ? state.data[state.lang] : null,\r\n    projectItems: state.projectItems,\r\n    category: state.category,\r\n    isStarted: state.isStarted,\r\n    imageClickedIdx: state.imageClickedIdx,\r\n    page: state.page,\r\n    isHideProjects: state.isHideProjects\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Projects);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { updateImageClickedIdx } from \"../../../reducers\";\r\nimport smoothScroll from \"../../../_component/scroll\";\r\nimport QRCode from \"qrcode.react\";\r\nimport '../../../sass/page/projectSingle.scss';\r\n\r\n// import Html from \"../../../_component/html\";\r\nimport { TweenMax } from \"gsap\";\r\n\r\nclass ProjectSingle extends Component {\r\n  static pageName = \"projectSingle\";\r\n\r\n  static propTypes = {\r\n    lang: PropTypes.string\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.pageName = ProjectSingle.pageName;\r\n    this.state = {};\r\n    this.smooth = null;\r\n    this.projectSingle = null;\r\n    this.closeBtn = null;\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.data){\r\n      if(this.props.imageClickedIdx !== null){\r\n        if(prevProps.imageClickedIdx !== this.props.imageClickedIdx){\r\n          if(this.projectSingle){\r\n            if(this.smooth){\r\n              this.smooth.off();\r\n              this.smooth.hideScrollBar();\r\n              this.smooth = null;\r\n            }\r\n            this.smooth = new smoothScroll(\"#projectSingle #scrollWrap\", (s, y, h) => {\r\n              if(this.closeBtn)\r\n                TweenMax.set(this.closeBtn,{force3D:true, y: Math.max(0, -y)});\r\n            });\r\n            this.smooth.on();\r\n            this.smooth.showScrollBar();\r\n            // TweenMax.set(this.projectSingle,{y:'0%'});\r\n            TweenMax.to(this.projectSingle, .6, {delay:2,autoAlpha:1});\r\n          }\r\n        }\r\n      }\r\n      else if(prevProps.imageClickedIdx > -1 && this.props.imageClickedIdx === null){\r\n        if(this.projectSingle){\r\n          this.closeBtn = null;\r\n          this.smooth.off();\r\n          this.smooth.hideScrollBar();\r\n          this.smooth = null;\r\n          TweenMax.set(this.projectSingle,{y:'100%'});\r\n        }\r\n        // console.log(this.props.imageClickedIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  onClick(e){\r\n    const video = e.currentTarget.parentNode.querySelector('video');\r\n    if(video.paused){\r\n      e.currentTarget.className = 'playing';\r\n      video.play();\r\n    }\r\n    else{\r\n      e.currentTarget.className = '';\r\n      video.pause();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if(this.props.imageClickedIdx === null || !this.props.isStarted)\r\n      return false;\r\n\r\n    const data = this.props.data['projects'];\r\n    const filteredData = [];\r\n    \r\n    // filtering data by category\r\n    for(let i=0; i<data.items.length; i++){\r\n      const value = data.items[i];\r\n      if(this.props.category === ''){\r\n        if(value.category.slug === data.categories[0].slug)\r\n          filteredData.push(value);\r\n      }\r\n      else{\r\n        if(value.category.slug === this.props.category) \r\n          filteredData.push(value);\r\n      }\r\n    }\r\n    \r\n    const fdata = filteredData[this.props.imageClickedIdx];\r\n    const globalData = this.props.data['global'];\r\n\r\n\r\n    if(this.props.data){\r\n      return (\r\n        <div ref={elem => this.projectSingle = elem} id=\"projectSingle\">\r\n          <div id=\"scrollWrap\">\r\n            <div ref={elem => this.closeBtn = elem} id=\"closeBtn\" onClick={()=>{\r\n              TweenMax.to(this.projectSingle, .3, {autoAlpha:0})\r\n              this.props.dispatch(updateImageClickedIdx(null))\r\n            }}><span></span><span></span></div>\r\n\r\n            <div id=\"wrap\">\r\n              <div id=\"info\">\r\n                <div id=\"logo\" className={fdata.images.logoresize?' small':''} style={{backgroundImage:`url('${fdata.images.logo}')`,backgroundColor:fdata.images.logoresize?fdata.images.logocolor:''}}></div>\r\n                <div id=\"infoContent\">\r\n                  <h1>{fdata.name}</h1>\r\n                  <div id=\"cat\">{fdata.category.name}</div>\r\n                  <div id=\"qrcode\">\r\n                    <QRCode value={fdata.website.url} renderAs=\"svg\"/>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div id=\"content\">\r\n                <div id=\"intro\" className=\"contentItem h5\">\r\n                  <div className=\"title\">{globalData && globalData.introduction}</div>\r\n                  <div dangerouslySetInnerHTML={{__html:fdata.details.introduction}} />\r\n                  <div id=\"tags\">\r\n                    {fdata.details.tags.map((value, idx)=>{\r\n                      return(\r\n                        <span key={idx}>{value}</span>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </div>\r\n\r\n                {\r\n                  fdata.details.awards.length > 0 && <div id=\"awards\" className=\"contentItem h5\">\r\n                    <div className=\"title\">{globalData && globalData.awards}</div>\r\n                    <ul>\r\n                    {\r\n                      fdata.details.awards.map((value, idx)=>{\r\n                        return(\r\n                          <li key={idx}>\r\n                            <div className=\"year\">{value.year}</div>\r\n                            <div className=\"awradsTitle\">{value.name}</div>\r\n                            <div className=\"awradsResult\">{value.result}</div>\r\n                          </li>\r\n                        )\r\n                      })\r\n                    }\r\n                    </ul>\r\n                  </div>\r\n                }\r\n                <div id=\"showcase\" className=\"contentItem h6\">\r\n                  <div className=\"title h5\">{globalData && globalData.showcase}</div>\r\n                  <ul>\r\n                  {\r\n                    fdata.details.showcase.map((value, idx)=>{\r\n                      return(\r\n                        <li key={idx} className={value.type}>\r\n                          {\r\n                            value.src && \r\n                            <>\r\n                            {value.type === 'image' && <img src={value.src} alt=\"\" /> }\r\n                            {value.type === 'video' && <div className=\"videoWrap\"><span onClick={this.onClick}></span><video><source src={value.src} type=\"video/mp4\"></source></video></div> }\r\n                            {value.description && <div dangerouslySetInnerHTML={{__html:`<div class=\"wrap\">${value.description}</div>`}} />}\r\n                            </>\r\n                          }\r\n                        </li>\r\n                      )\r\n                    })\r\n                  }\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return <></>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang,\r\n    data: state.data ? state.data[state.lang] : null,\r\n    isStarted: state.isStarted,\r\n    imageClickedIdx: state.imageClickedIdx,\r\n    category: state.category,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProjectSingle);\r\n","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport TweenMax, { TimelineMax } from 'gsap';\r\nimport smoothScroll from \"../../_component/scroll\";\r\nimport \"../../sass/page/about.scss\";\r\n\r\n// const usePrevious = (value) => {\r\n//   const ref = useRef();\r\n//   useEffect(() => {\r\n//     ref.current = value;\r\n//   });\r\n//   return ref.current;\r\n// }\r\n\r\n\r\nclass About extends Component {\r\n  static pageName = \"about\";\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.pageName = About.pageName;\r\n    this.state = {\r\n      activeId: null\r\n    };\r\n    this.about = null;\r\n    this.smooth = null;\r\n    this.openArticle = this.openArticle.bind(this);\r\n    this.titleSpan = [];\r\n  }\r\n\r\n  // static actions = () => [fetchDataBy(this.pageName)];\r\n\r\n  // static pushData = data => fetchDataSuccess(this.pageName, data);\r\n\r\n  // componentDidMount() {\r\n  //   if (!this.props.projectsData && this.props.match.params.lang === this.props.lang) {\r\n  //     this.props.dispatch(fetchDataBy(this.pageName));\r\n  //   }\r\n  // }\r\n\r\n  // shouldComponentUpdate(nextProps){\r\n  //   if (nextProps.lang !== this.props.lang) {\r\n  //     this.props.dispatch(fetchDataBy(this.pageName));\r\n  //   }\r\n  //   return true;\r\n  // }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(prevProps.page !== 'about' && this.props.page === 'about'){\r\n      if(this.smooth){\r\n        this.smooth.off();\r\n        this.smooth.hideScrollBar();\r\n        this.smooth = null;\r\n      }\r\n      this.smooth = new smoothScroll(\"#about #scrollWrap\", (s, y, h) => {\r\n      });\r\n      this.smooth.on();\r\n      this.smooth.showScrollBar();\r\n      TweenMax.to(this.about, .6, {delay:1,autoAlpha:1});\r\n      this.textAnim();\r\n    }\r\n\r\n    if(this.props.page !== 'about'){\r\n      if(this.state.activeId !== null) this.setState({activeId: null})\r\n    }\r\n  }\r\n\r\n  openArticle(e, idx){\r\n    if(this.state.activeId !== idx){\r\n      this.setState({activeId: idx});\r\n      TweenMax.set(e.currentTarget.querySelector('.contentWrap'),{height:e.currentTarget.querySelector('.content').offsetHeight})\r\n    }\r\n    else{\r\n      this.setState({activeId: null});\r\n      TweenMax.set(e.currentTarget.querySelector('.contentWrap'),{height:0})\r\n    }\r\n  }\r\n\r\n  textAnim(){\r\n    if(this.props.data) {\r\n      const tl = new TimelineMax({ delay:.8 });\r\n      for(let i=0; this.titleSpan[i]; i++){\r\n        const value = this.titleSpan[i];\r\n        const xory = Math.round(Math.random());\r\n        value.style.willChange = \"transform\";\r\n        const time = Math.random() * 0.5 + 0.8;\r\n        xory === 0 ? \r\n          tl.fromTo( value, time , { x: Math.round(Math.random()) * 200 - 100 + \"%\", autoAlpha:0 },{ x: 0 + \"%\", autoAlpha:1, overwrite:'all', ease: \"Expo.easeOut\",\r\n            onComplete: () => {\r\n              value.style.willChange = \"\";\r\n            }\r\n          },Math.random())\r\n        : \r\n          tl.fromTo(value, time,{ x: 0 + \"%\", y: Math.round(Math.random()) * 200 - 100 + \"%\", autoAlpha:0 },{ y: 0 + \"%\", autoAlpha:1, overwrite:'all', ease: \"Expo.easeOut\",\r\n            onComplete: () => {\r\n              value.style.willChange = \"\";\r\n            }\r\n          },Math.random());\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    if(this.props.page !== 'about'){\r\n      return false;\r\n    }\r\n\r\n    if (this.props.data) {\r\n      const data = this.props.data['about'];\r\n      const homeData = this.props.data['home'];\r\n      const globalData = this.props.data['global'];\r\n      let i = 0;\r\n\r\n      return(\r\n        <div ref={elem => this.about = elem} id=\"about\">\r\n          <div id=\"scrollWrap\">\r\n            <div id=\"wrap\">\r\n              <div id=\"left\">\r\n                <h1 className=\"cap\">\r\n                  {`${this.props.lang === 'en' ?'About':'關於'}`.split(\"\").map((value, idx) => {\r\n                    return (\r\n                      <span key={idx}>\r\n                        <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                          {value}\r\n                        </span>\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </h1>\r\n              </div>\r\n              <div id=\"right\">\r\n                <div id=\"lineWrap\">\r\n                  <div id=\"line\"></div>\r\n                </div>\r\n                <div id=\"hof\">\r\n                  <h1 className=\"cap\">\r\n                    <span className=\"blue\">{\r\n                      homeData.title1.split(\"\").map((value, idx) => {\r\n                        return (\r\n                          <span key={idx}>\r\n                            <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                              {value}\r\n                            </span>\r\n                          </span>\r\n                        );\r\n                      })}\r\n                    </span>\r\n                    <span className=\"orange\">\r\n                      {homeData.title2.split(\"\").map((value, idx) => {\r\n                        return (\r\n                          <span key={idx}>\r\n                            <span ref={elem => (this.titleSpan[i++] = elem)}>\r\n                              {value}\r\n                            </span>\r\n                          </span>\r\n                        );\r\n                      })}\r\n                    </span>\r\n                  </h1>\r\n                </div>\r\n                <div id=\"intro\" className=\"contentWrap h5\">\r\n                  <div className=\"title\">{globalData && globalData.introduction}</div>\r\n                  <div dangerouslySetInnerHTML={{__html:data.introduction}} />\r\n                  <div id=\"image\"><img src={data.image.thumbnail} alt=\"\"/></div>\r\n                </div>\r\n\r\n                <ul id=\"articles\">\r\n                  {\r\n                    data.articles.map((value, idx)=>{\r\n                      return (\r\n                        <li key={idx} className={`h5 ${this.state.activeId === idx ? 'active' : ''}`} onClick={(e)=>{this.openArticle(e,idx)}}>\r\n                          <div className=\"infoWrap\">\r\n                            <div className=\"title\" dangerouslySetInnerHTML={{__html: value.name}} />\r\n                            <span className=\"detailBtn\">{globalData && this.state.activeId === idx ? globalData.hidedetails : globalData.moredetails}</span>\r\n                          </div>\r\n                          <div className=\"contentWrap\">\r\n                            <div className=\"content\">\r\n                              <div dangerouslySetInnerHTML={{__html: value.details}} />\r\n                            </div>\r\n                          </div>\r\n                        </li>\r\n                      )\r\n                    })\r\n                  }\r\n                  <span id=\"title\" className=\"cap\">{globalData && globalData.article}</span>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang,\r\n    page: state.page,\r\n    data: state.data ? state.data[state.lang] : null,\r\n    // globalData: state.globalData\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(About);\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as THREE from \"three\";\r\n// import OrbitControls from \"three-orbitcontrols\";\r\n// import * as dat from \"dat.gui\";\r\n// import Stats from \"stats.js\";\r\nimport { TweenMax, TimelineMax } from \"gsap\";\r\nimport { updateIsStarted, updatePage, updateImageClickedIdx, updateHideProjects } from \"../../reducers\";\r\nimport mask from './mask.jpg';\r\n\r\nconsole.warn = function(){};\r\n\r\nconst usePrevious = (value) => {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\n\r\nconst ThreejsBg = props => {\r\n  const canvasWrap = useRef(null);\r\n  const initImageFunction = useRef(null);\r\n  const removeImageFunction = useRef(null);\r\n  const updateImageEffectFunction = useRef(null);\r\n  const loadImageFunction = useRef(null);\r\n  const updateStopEaseFunction = useRef(null);\r\n  const backToHomeFunction = useRef(null);\r\n  const onClickFunction = useRef(null);\r\n  const prevProps = usePrevious({page: props.page});\r\n\r\n  useEffect(() => {\r\n    let scene, camera, renderer, dist;\r\n    let screenWidth, screenHeight, initHeight;\r\n    // let onWindowResize;\r\n    // const stats = new Stats();\r\n\r\n    const instancedCount = 10,\r\n        limitedTextureCount = 16;\r\n\r\n    let plane,\r\n        planeWidth = 10,\r\n        planeHeight = planeWidth * 0.75;\r\n    const planeOffsets = [],\r\n        planeSpeed = [];\r\n    let planeOffsetAttribute;\r\n\r\n    let clicked = false,\r\n        initedImage = false;\r\n\r\n    let images,\r\n        imagesMaterial = null,\r\n        changedCategory = false,\r\n        offset = {x:0, y:0, z:0},\r\n        rotate = {x:0, y:0, z:0},\r\n        disableEase = false,\r\n        tween = [];\r\n        \r\n    let imageInstancedCount,\r\n        imageOffsetAttribute,\r\n        imageRotateAttribute,\r\n        imageScaleAttribute,\r\n        imageTextureIdxAttribute,\r\n        imageSlideProgressAttribute,\r\n        imageDisplacementAttribute,\r\n        imageVisibleAttribute;\r\n\r\n    let imageOffsets = [],\r\n        imageBGOffsets = [],\r\n        imageBGEase = [],\r\n        imageRotate = [],\r\n        imageScale = [],\r\n        imageSize = [],\r\n        imageTexture = [],\r\n        imageTextureIdx = [],\r\n        // imageTextureSize = [],\r\n        imageSlideProgress = [],\r\n        imageDisplacement = [],\r\n        imageVisible = [],\r\n        imageLoaded = [],\r\n        imageInScreenIdx = [],\r\n        imageInScreenTexture = [],\r\n        imageClickedIdx,\r\n        tempImageSize = [];\r\n        \r\n    let imageWrapDOM = null;\r\n\r\n    let logo,\r\n        logoRotateSpeed = {value: 0},\r\n        rotateSpeed = {value: 0.004};\r\n\r\n    let guiWireframe;\r\n\r\n    const options = {\r\n      planeSpeed: 0.001,\r\n      slideProgress: 0,\r\n      gary: false\r\n    };\r\n\r\n    const init = function() {\r\n      scene = new THREE.Scene();\r\n      camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n      // camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, .1, 1000 );\r\n\r\n      dist = camera.position.z = 60;\r\n      const screen = getScreenSize();\r\n      screenWidth = screen.width;\r\n      screenHeight = screen.height;\r\n      // new OrbitControls(camera);\r\n\r\n      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(window.innerWidth, window.innerHeight);\r\n      renderer.setClearColor(0xffffff, 0);\r\n      canvasWrap.current.appendChild(renderer.domElement);\r\n\r\n      // gui = new dat.GUI({ width: 350 });\r\n      // gui.add(options, \"planeSpeed\").min(0).max(2).name('background plane speed').listen();\r\n      // gui.add(options, \"slideProgress\").min(0).max(1).name('color of logo slider').listen();\r\n      // const g = gui.add(options, \"gary\").name('set Gary image');\r\n      // g.onChange(()=>{\r\n      //   if(imagesMaterial)\r\n      //     imagesMaterial.uniforms.isGary.value = options.gary;\r\n      // })\r\n      // gui.domElement.parentNode.style.zIndex = 999;\r\n\r\n      // stats\r\n      // stats.showPanel(0);\r\n      // stats.domElement.style.position = \"fixed\";\r\n      // stats.domElement.style.top = 0;\r\n      // document.body.appendChild(stats.domElement);\r\n\r\n      initLight();\r\n      initMesh();\r\n\r\n      renderer.setAnimationLoop(function() {\r\n        update();\r\n        render();\r\n      });\r\n\r\n      TweenMax.to(options, .6, {planeSpeed: .1, ease:'Power3.easeInOut'});\r\n      TweenMax.to(logo.position, 2, {x:5, z:20, ease:'Power3.easeInOut'});\r\n    };\r\n\r\n    const getScreenSize = function() {\r\n      let w,h;\r\n      const vFOV = THREE.Math.degToRad(camera.fov);\r\n      \r\n      if (vFOV) {\r\n        h = 2 * Math.tan(vFOV / 2) * dist;\r\n        w = h * camera.aspect;\r\n      } else {\r\n        w = window.innerWidth;\r\n        h = window.innerHeight;\r\n      }\r\n      return { width: w, height: h };\r\n    };\r\n\r\n    const getRandomXY = bottomPos => {\r\n      let x = Math.random() * (screenWidth + planeWidth) - screenWidth/2 - planeWidth/2;\r\n      let y = bottomPos || Math.random() * screenHeight - screenHeight/2;\r\n\r\n      // avoid to overlap\r\n      for (let o = 0; o < planeOffsets.length; o += 3) {\r\n        const a = planeOffsets[o] - x;\r\n        const b = planeOffsets[o + 1] - y;\r\n        let planeDist = Math.sqrt(a * a + b * b);\r\n\r\n        if (planeDist <= planeWidth * 1.1) {\r\n          x = Math.random() * (screenWidth + planeWidth) - screenWidth / 2- planeWidth/2;\r\n          if (!bottomPos) y = Math.random() * screenHeight - screenHeight / 2;\r\n          else y -= 1;\r\n          o = -3;\r\n        }\r\n      }\r\n      return { x: x, y: y };\r\n    };\r\n\r\n    const convert2dto3d = (x,y) => {\r\n      var vector = new THREE.Vector3((x / window.innerWidth ) * 2 - 1, - ( y / window.innerHeight ) * 2 + 1, 1);\r\n      vector.unproject( camera );\r\n      var dir = vector.sub( camera.position ).normalize();\r\n      var distance = - camera.position.z / dir.z;\r\n      return camera.position.clone().add( dir.multiplyScalar( distance ) );\r\n    }\r\n\r\n    const initLight = () => {\r\n      const ambientLight = new THREE.AmbientLight(0xffffff);\r\n      scene.add(ambientLight);\r\n    };\r\n\r\n    const initMesh = () => {\r\n      initPlane();\r\n      initLogo();\r\n    };\r\n\r\n    const initLogo = () => {\r\n      const bigBallSize = 4;\r\n      const smallBallSize = 2.5;\r\n      const ballDist = 15;\r\n      const cylinderHeight = ballDist * .8;\r\n      const shpereDetail = 32;\r\n\r\n      const material = new THREE.MeshBasicMaterial({ color: 0xe9e9e9 });\r\n      \r\n      const topShpereGeometry = new THREE.SphereGeometry(smallBallSize, shpereDetail, shpereDetail);\r\n      const topShpere = new THREE.Mesh(topShpereGeometry, material);\r\n      topShpere.position.set(0, ballDist*Math.sin(45*Math.PI/180), ballDist*Math.cos(45*Math.PI/180));\r\n      \r\n      const botShpereGeometry = new THREE.SphereGeometry(smallBallSize, shpereDetail, shpereDetail);\r\n      const botShpere = new THREE.Mesh(botShpereGeometry, material);\r\n      botShpere.position.set(0, ballDist*Math.sin(-45*Math.PI/180), ballDist*Math.cos(-45*Math.PI/180));\r\n\r\n      const leftShpereGeometry = new THREE.SphereGeometry(smallBallSize, shpereDetail, shpereDetail);\r\n      const leftShpere = new THREE.Mesh(leftShpereGeometry, material);\r\n      leftShpere.position.set(-ballDist*Math.sin(45*Math.PI/180), 0, -ballDist*Math.cos(45*Math.PI/180));\r\n\r\n      const rightShpereGeometry = new THREE.SphereGeometry(smallBallSize, shpereDetail, shpereDetail);\r\n      const rightShpere = new THREE.Mesh(rightShpereGeometry, material);\r\n      rightShpere.position.set(-ballDist*Math.sin(-45*Math.PI/180), 0, -ballDist*Math.cos(-45*Math.PI/180));\r\n\r\n      // cone\r\n      const topCylinderGeometry = new THREE.CylinderGeometry(smallBallSize*.1, smallBallSize*.6, cylinderHeight, 16, 1, true);\r\n      const topCylinder = new THREE.Mesh(topCylinderGeometry, material);\r\n      topCylinder.position.set(0, ballDist*.4, ballDist*.4);\r\n      topCylinder.rotation.x = 225 * Math.PI/180;\r\n\r\n      const botCylinderGeometry = new THREE.CylinderGeometry(smallBallSize*.1, smallBallSize*.6, cylinderHeight, 16, 1, true);\r\n      const botCylinder = new THREE.Mesh(botCylinderGeometry, material);\r\n      botCylinder.position.set(0, -ballDist*.4, ballDist*.4);\r\n      botCylinder.rotation.x = -45 * Math.PI/180;\r\n\r\n      const leftCylinderGeometry = new THREE.CylinderGeometry(smallBallSize*.1, smallBallSize*.6, cylinderHeight, 16, 1, true);\r\n      const leftCylinder = new THREE.Mesh(leftCylinderGeometry, material);\r\n      leftCylinder.position.set(-ballDist*.4, 0, -ballDist*.4);\r\n      leftCylinder.rotation.set(90 * Math.PI/180, 0, -45 * Math.PI/180);\r\n      \r\n      const rightCylinderGeometry = new THREE.CylinderGeometry(smallBallSize*.1, smallBallSize*.6, cylinderHeight, 16, 1, true);\r\n      const rightCylinder = new THREE.Mesh(rightCylinderGeometry, material);\r\n      rightCylinder.position.set(ballDist*.4, 0, -ballDist*.4);\r\n      rightCylinder.rotation.set(90 * Math.PI/180, 0, 45 * Math.PI/180);\r\n\r\n      // all\r\n      let centerShpereGeometry = new THREE.SphereGeometry(bigBallSize, shpereDetail, shpereDetail);\r\n      topShpere.updateMatrix();\r\n      centerShpereGeometry.merge(topShpere.geometry, topShpere.matrix);\r\n      botShpere.updateMatrix();\r\n      centerShpereGeometry.merge(botShpere.geometry, botShpere.matrix);\r\n      leftShpere.updateMatrix();\r\n      centerShpereGeometry.merge(leftShpere.geometry, leftShpere.matrix);\r\n      rightShpere.updateMatrix();\r\n      centerShpereGeometry.merge(rightShpere.geometry, rightShpere.matrix);\r\n      \r\n      topCylinder.updateMatrix();\r\n      centerShpereGeometry.merge(topCylinder.geometry, topCylinder.matrix);\r\n      botCylinder.updateMatrix();\r\n      centerShpereGeometry.merge(botCylinder.geometry, botCylinder.matrix);\r\n      leftCylinder.updateMatrix();\r\n      centerShpereGeometry.merge(leftCylinder.geometry, leftCylinder.matrix);\r\n      rightCylinder.updateMatrix();\r\n      centerShpereGeometry.merge(rightCylinder.geometry, rightCylinder.matrix);\r\n      \r\n      const finalMaterial = new THREE.ShaderMaterial({\r\n        uniforms:{\r\n          disp:{ type:'t', value: new THREE.TextureLoader().load(mask) },\r\n          slideProgress:{ type:'f', value:0 }\r\n        },\r\n        vertexShader: [\r\n          'varying vec2 vUv;',\r\n          'void main(){',\r\n            'vUv = uv;',\r\n            'vec3 newPosition = position;',\r\n            'vec4 position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);',\r\n            'gl_Position = position;',\r\n          '}'\r\n        ].join('\\n'),\r\n        fragmentShader:[\r\n          'uniform sampler2D disp;',\r\n          'uniform float slideProgress;',\r\n\r\n          'varying vec2 vUv;',\r\n\r\n          'void main(){',\r\n            'vec4 disp = texture2D(disp, vUv);',\r\n            'float r = (slideProgress) * 2. - 1.;',\r\n            'float value = clamp((disp.r + r - .7) * 5., 0., 1.);',\r\n            'vec3 color = mix(vec3(5./255., 110./255., 225./255.), vec3(233./255., 233./255., 233./255.), value);',\r\n            //'vec3 color = mix(vec3(14./255., 45./255., 118./255.), vec3(233./255., 233./255., 233./255.), value);',\r\n            'gl_FragColor = vec4(color, 1.);',\r\n          '}'\r\n        ].join('\\n'),\r\n        side:THREE.DoubleSide \r\n      });\r\n\r\n      logo = new THREE.Mesh(centerShpereGeometry, finalMaterial);\r\n      logo.position.z = 60;\r\n\r\n      scene.add(logo);\r\n    }\r\n\r\n    const initPlane = () => {\r\n      const bufferGeometry = new THREE.PlaneBufferGeometry( planeWidth, planeHeight, planeWidth, planeHeight);\r\n      const geometry = new THREE.InstancedBufferGeometry();\r\n      geometry.maxInstancedCount = instancedCount;\r\n      geometry.index = bufferGeometry.index;\r\n      geometry.attributes.position = bufferGeometry.attributes.position;\r\n      geometry.attributes.normal = bufferGeometry.attributes.normal;\r\n\r\n      for (let i = 0; i < instancedCount; i++) {\r\n        planeSpeed.push(Math.random()+.5);\r\n        let { x, y } = getRandomXY();\r\n        planeOffsets.push(x, y-screenHeight-planeHeight, -5);\r\n      }\r\n\r\n      planeOffsetAttribute = new THREE.InstancedBufferAttribute( new Float32Array(planeOffsets), 3 );\r\n      geometry.addAttribute(\"offset\", planeOffsetAttribute);\r\n\r\n      var material = new THREE.MeshBasicMaterial({ color: 0xefefef, wireframe:true, transparent:true });\r\n      material.onBeforeCompile = function(shader) {\r\n        shader.vertexShader =\r\n          \"attribute vec3 offset;\\n\" + shader.vertexShader;\r\n        shader.vertexShader = shader.vertexShader.replace(\r\n          \"#include <begin_vertex>\",\r\n          ['vec3 newPosition = position;',\r\n          'newPosition.z = (sin(newPosition.x + offset.y) + sin(newPosition.y + offset.y)) * .3;',\r\n          \"vec3 transformed = vec3(newPosition + offset);\"].join(\"\\n\")\r\n        );\r\n      };\r\n\r\n      plane = new THREE.Mesh(geometry, material);\r\n      scene.add(plane);\r\n    };\r\n\r\n    const loadTexture = (i, src) => {\r\n      new THREE.TextureLoader().load(\r\n        src,\r\n        (t)=>{\r\n          t.flipY = false;\r\n          t.anisotropy = renderer.capabilities.getMaxAnisotropy();\r\n          imageTexture[i] = t;\r\n          resizeImage();\r\n        }\r\n      );\r\n    }\r\n\r\n    const loadImage = () => {\r\n      if(imageWrapDOM){\r\n        const lth = imageWrapDOM.length;//document.querySelectorAll('#projects li').length;\r\n        for (let i = 0; i < lth; i++) {\r\n          const elem = imageWrapDOM[i].children[1];\r\n          // const elem = document.querySelector(`#projects li:nth-child(${i+1}) .imageWrap`);\r\n          if(elem){\r\n            const offset = elem.getBoundingClientRect();\r\n            if(offset.top > 0 && offset.top-elem.offsetHeight < window.innerHeight*2 && !imageLoaded[i]){\r\n              loadTexture(i, elem.getAttribute('data-src'));\r\n              imageLoaded[i] = true;\r\n            }\r\n          }\r\n        \r\n        }\r\n      }\r\n    }\r\n    loadImageFunction.current = {loadImage};\r\n\r\n    \r\n    const resizeImage = () => {\r\n      if(imageTexture.length){\r\n        const lth = imageWrapDOM.length;//document.querySelectorAll(`#projects li`).length;\r\n\r\n        for(let i=0; i< lth; i++){\r\n          if(imageTexture[i]){\r\n            const elem = imageWrapDOM[i].children[1];//document.querySelector(`#projects li:nth-child(${i+1}) .imageWrap`);\r\n            if(elem){\r\n              if(imageTexture[i].image){\r\n                elem.style.height = elem.offsetWidth * (imageTexture[i].image.height / imageTexture[i].image.width) + 'px';\r\n                // elem.style.height = elem.offsetWidth * (imageTextureSize[i].h / imageTextureSize[i].w) + 'px';\r\n              }\r\n            }\r\n            imageSize[i] = {w:elem.offsetWidth, h:elem.offsetHeight};\r\n\r\n            if(!tempImageSize[i]) tempImageSize[i] = imageSize[i];\r\n          }\r\n        }\r\n\r\n        // resize 3d image\r\n        for(let i=0; i<tempImageSize.length; i++){\r\n          if(tempImageSize[i]){\r\n            const scaleHeight = imageSize[i].h / (imageSize[i].w);\r\n            const w = imageSize[i].w / tempImageSize[i].w;\r\n            const hh = (1-initHeight/window.innerHeight);\r\n            if(imageScaleAttribute){\r\n              imageScaleAttribute.setXY(i, imageSize[i].w/tempImageSize[i].w - hh * w, scaleHeight * (imageSize[i].w/tempImageSize[i].w - hh * w));\r\n              imageScaleAttribute.setXY(i+imageInstancedCount/2, imageSize[i].w/tempImageSize[i].w - hh * w, scaleHeight * (imageSize[i].w/tempImageSize[i].w - hh * w));\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // if(!tempImageSize.length) tempImageSize = Array.from(imageSize);\r\n    }\r\n\r\n\r\n    const initImage = (catIdx, allItem, itemSize) => {\r\n      // console.log(allItem)\r\n      imageWrapDOM = allItem;//document.querySelectorAll(`#projects li .imageWrap`);\r\n\r\n      const elem = imageWrapDOM[0].children[1];//document.querySelector('#projects li:nth-child(1) .imageWrap');\r\n\r\n      // if(elem){\r\n        if(!initedImage){\r\n          initHeight = window.innerHeight;\r\n          imageInstancedCount = itemSize * 2;//document.querySelectorAll('#projects li').length * 2;\r\n\r\n          const realCount = imageInstancedCount/2;\r\n          const {x,y} = convert2dto3d(elem.offsetWidth, elem.offsetWidth);\r\n          const w = x + (screenWidth - screenWidth/2);\r\n          const h = y - (screenHeight - screenHeight/2);\r\n          const bufferGeometry = new THREE.PlaneBufferGeometry(w,h, w*5, -h*5);\r\n          const geometry = new THREE.InstancedBufferGeometry();\r\n          geometry.maxInstancedCount = imageInstancedCount;\r\n          geometry.index = bufferGeometry.index;\r\n          geometry.attributes.position = bufferGeometry.attributes.position;\r\n          geometry.attributes.normal = bufferGeometry.attributes.normal;\r\n          geometry.attributes.uv = bufferGeometry.attributes.uv;\r\n        \r\n          for (let i = 0; i < imageInstancedCount; i++) {\r\n            imageOffsets.push(0,-screenHeight,0);\r\n            imageBGOffsets.push({x:Math.random()*.7+.3, y:Math.random()*1+.5, z:0});\r\n            imageBGEase.push(Math.random()*0.2+0.08);\r\n            imageRotate.push(0,0,0);\r\n            imageScale.push(1,1,1);\r\n            imageTextureIdx.push(i);\r\n            imageSlideProgress.push({value:0});\r\n            imageDisplacement.push({value:0});\r\n            imageVisible.push(0);\r\n          }\r\n          \r\n\r\n          imageOffsetAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageOffsets), 3 );\r\n          geometry.addAttribute(\"offset\", imageOffsetAttribute);\r\n          imageScaleAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageScale), 3 );\r\n          geometry.addAttribute(\"scale\", imageScaleAttribute);\r\n          imageRotateAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageRotate), 3 );\r\n          geometry.addAttribute(\"rotate\", imageRotateAttribute);\r\n          imageTextureIdxAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageTextureIdx), 1 );\r\n          geometry.addAttribute(\"textureIdx\", imageTextureIdxAttribute);\r\n          imageSlideProgressAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageSlideProgress), 1 );\r\n          geometry.addAttribute(\"slideProgress\", imageSlideProgressAttribute);\r\n          imageDisplacementAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageDisplacement), 1 );\r\n          geometry.addAttribute(\"displacement\", imageDisplacementAttribute);\r\n          imageVisibleAttribute = new THREE.InstancedBufferAttribute( new Float32Array(imageVisible), 1 );\r\n          geometry.addAttribute(\"visible\", imageVisibleAttribute);\r\n\r\n\r\n          changedCategory = catIdx;\r\n          imagesMaterial = new THREE.ShaderMaterial({\r\n            uniforms:{ \r\n                // images:{ type:'t', value: imageTexture },\r\n                inScreenIdx:{ type:'f', value: [0,1,2,3] },\r\n                inScreenTexture:{ type:'t', value: imageInScreenTexture },\r\n                clickedIdx:{ type: 'f', value: -1 },\r\n                isGary:{ type:'bool', value: options.gary },\r\n                changedCategory: {type:'bool', value: changedCategory}\r\n            },\r\n            vertexShader: [\r\n              `uniform float inScreenIdx[${limitedTextureCount}];`,\r\n              `uniform sampler2D inScreenTexture[${limitedTextureCount}];`,\r\n              \r\n              'attribute float textureIdx;',\r\n              'attribute float slideProgress;',\r\n              'attribute float displacement;',\r\n              'attribute vec3 offset;',\r\n              'attribute vec3 rotate;',\r\n              'attribute vec3 scale;',\r\n              'attribute float visible;',\r\n\r\n              'varying vec2 vUv;',\r\n              'varying float idx;',\r\n              'varying float colorProgress;',\r\n              'varying float vVisible;',\r\n              \r\n              'void main(){',\r\n                  'float PI = 3.14159;',\r\n                  'vUv = uv;',\r\n                  'idx = textureIdx;',\r\n                  'vVisible = visible;',\r\n                  // Rotate\r\n                  \"mat4 rXPos = mat4(vec4(1.0,0.0,0.0,0.0),\",\r\n                                    \"vec4(0.0,cos(rotate.x),-sin(rotate.x),0.0),\",\r\n                                    \"vec4(0.0,sin(rotate.x),cos(rotate.x),0.0),\",\r\n                                    \"vec4(0.0,0.0,0.0,1.0));\",\r\n\r\n                  \"mat4 rYPos = mat4(vec4(cos(rotate.y),0.0,sin(rotate.y),0.0),\",\r\n                                    \"vec4(0.0,1.0,0.0,0.0),\",\r\n                                    \"vec4(-sin(rotate.y),0.0,cos(rotate.y),0.0),\",\r\n                                    \"vec4(0.0,0.0,0.0,1.0));\",\r\n\r\n                  \"mat4 rZPos = mat4(vec4(cos(rotate.z),-sin(rotate.z),0.0,0.0),\",\r\n                                    \"vec4(sin(rotate.z),cos(rotate.z),0.0,0.0),\",\r\n                                    \"vec4(0.0,0.0,1.0,0.0),\",\r\n                                    \"vec4(0.0,0.0,0.0,1.0));\",\r\n\r\n                  'mat4 sPos = mat4(vec4(scale.x,0.0,0.0,0.0),',\r\n                                  'vec4(0.0,scale.y,0.0,0.0),',\r\n                                  'vec4(0.0,0.0,scale.z,0.0),',\r\n                                  'vec4(offset,1.0));',\r\n\r\n                  'mat4 matPos = sPos * rXPos * rYPos * rZPos;',\r\n                  'vec3 newPosition = position;',\r\n\r\n\r\n                'if(visible == 1.){',\r\n                  `for(int i=0; i<${limitedTextureCount}; i++){`,\r\n                    'if(inScreenIdx[i] == -1.)',\r\n                      'break;',\r\n                    `if(idx == inScreenIdx[i]+${realCount}.){`,\r\n                      'vec4 texture = texture2D(inScreenTexture[i], vUv);',\r\n                      'float color = texture.r + texture.g + texture.b;',\r\n                      'newPosition.z += color * 2.;',\r\n\r\n                      'if(color < .3)',\r\n                        'newPosition.z += 4.;',\r\n                      'if(color < .5)',\r\n                        'newPosition.z -= 5.;',\r\n\r\n                      'break;',\r\n                    '}',\r\n                  '}',\r\n                  'newPosition.z *= displacement;',\r\n\r\n                  `if(textureIdx > ${realCount-1}.){`,\r\n                    'colorProgress = pow(((slideProgress * 3. - 1.) + uv.y - uv.x)* 5. - 5. / 2., 4.);',\r\n                    'newPosition.z += 5. * -sin(max(0., min(1., colorProgress))* 360. * PI/180.);',\r\n                  '}',\r\n\r\n                  \r\n                  'vec4 position = projectionMatrix * modelViewMatrix * matPos * vec4(newPosition, 1.0);',\r\n                  \r\n                  'gl_Position = position;',\r\n                '}',\r\n                'else',\r\n                  'gl_Position = projectionMatrix * modelViewMatrix * matPos * vec4(newPosition, 1.0);',\r\n              '}'\r\n            ].join('\\n'),\r\n            fragmentShader:[\r\n              `uniform float inScreenIdx[${limitedTextureCount}];`,\r\n              `uniform sampler2D inScreenTexture[${limitedTextureCount}];`,\r\n              'uniform bool isGary;',\r\n              'uniform bool changedCategory;',\r\n\r\n              'varying vec2 vUv;',\r\n              'varying float idx;',\r\n              'varying float colorProgress;',\r\n              'varying float vVisible;',\r\n\r\n              'void main(){',\r\n                'if(vVisible == 1.){',\r\n                  'vec4 color = vec4(vec3(1.,1.,1.), 1.);',\r\n                  `for(int i=0; i<${limitedTextureCount}; i++){`,\r\n                    'if(inScreenIdx[i] == -1.)',\r\n                      'break;',\r\n                    `if(idx == inScreenIdx[i]+${realCount}.){`,\r\n                      'color = texture2D(inScreenTexture[i], vUv);',\r\n                      'if(isGary){',\r\n                        'float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));',\r\n                        'color = vec4(vec3(gray), 1.0);',\r\n                      '}',\r\n                      'break;',\r\n                    '}',\r\n                    'if(idx == inScreenIdx[i]){',\r\n                      'if(changedCategory)',\r\n                        'color = vec4(vec3(255./255., 110./255., 15./255.), 1.);', // orange\r\n                        // 'color = vec4(vec3(236./255., 105./255., 0./255.), 1.);', // orange\r\n                      'else',\r\n                        'color = vec4(vec3(5./255., 110./255., 225./255.), 1.);', // blue\r\n                        //'color = vec4(vec3(14./255., 45./255., 118./255.), 1.);', // blue\r\n                      'break;',\r\n                    '}',\r\n                  '}',\r\n\r\n                  'gl_FragColor = color;',\r\n                '}',\r\n                'else',\r\n                  'gl_FragColor = vec4(vec3(1.,1.,1.), 0.);',\r\n              '}'\r\n            ].join('\\n'),\r\n            depthTest: false,\r\n            side:THREE.DoubleSide,\r\n            transparent:true\r\n          });\r\n\r\n          imagesMaterial.minFilter = THREE.LinearFilter;\r\n          // imagesMaterial.uniforms.isGary.value = true;\r\n\r\n          images = new THREE.Mesh(geometry, imagesMaterial);\r\n          scene.add(images);\r\n          initedImage = true;\r\n\r\n          resizeImage();\r\n\r\n          const imageAnim = (i) => {\r\n            tween[i] = TweenMax.fromTo(imageSlideProgress[i], Math.random()+1, {value:0},{delay:Math.random()*8+2, value:1,ease:'Power3.easeInOut', \r\n              onComplete:()=>{imageAnim(i)}\r\n            });\r\n          }\r\n          for (let i = 0; i < imageInstancedCount; i++) {\r\n            imageAnim(i);\r\n          }\r\n\r\n          // if(guiWireframe) gui.remove(guiWireframe);\r\n          // guiWireframe = gui.add(imagesMaterial, \"wireframe\");\r\n        }\r\n      // }\r\n    }\r\n    initImageFunction.current = {initImage}\r\n\r\n\r\n    const imageEffect = (idx) => {\r\n      if(images){\r\n        if(idx !== null){\r\n          if(images.material.uniforms.clickedIdx.value !== idx){\r\n            const realCount = imageInstancedCount/2;\r\n            const realIdx = idx+realCount;\r\n            images.material.uniforms.clickedIdx.value = realIdx;\r\n            \r\n            TweenMax.to(rotate, .4, {x:45*Math.PI/180, y:45*Math.PI/180, ease:'Power3.easeOut'});\r\n            TweenMax.to(imageDisplacement[realIdx], 1, {delay:.6, value: 1, ease:'Power4.easeInOut',\r\n              onStart:()=>{\r\n                if(imagesMaterial)\r\n                  imagesMaterial.depthTest = true;\r\n              }\r\n            });\r\n\r\n            imageClickedIdx = realIdx;\r\n          }\r\n        }\r\n        else{\r\n          // when closed\r\n          stopEase();\r\n          imagesMaterial.depthTest = false;\r\n\r\n          images.material.uniforms.clickedIdx.value = -1;\r\n          TweenMax.to(imageDisplacement, .6, {value: 0, ease:'Power3.easeOut'});\r\n          TweenMax.to(rotate, .4, {x:0, y:0, ease:'Power3.easeOut'});\r\n        }\r\n      }\r\n    }\r\n    updateImageEffectFunction.current = {imageEffect};\r\n\r\n    const stopEase = () => {\r\n      disableEase = true;\r\n      setTimeout(()=>{\r\n        disableEase = false;\r\n      },100)\r\n    }\r\n    updateStopEaseFunction.current = {stopEase};\r\n\r\n    const removeImage = () => {\r\n      if(images){\r\n        // console.log('del')\r\n        for(let i=0; i<tween.length; i++){\r\n          tween[i].kill();\r\n          tween[i] = undefined;\r\n        }\r\n        tween = [];\r\n        images.geometry.dispose();\r\n        images.material.dispose();\r\n        scene.remove(images);\r\n        images = undefined;\r\n        imagesMaterial.dispose();\r\n        imagesMaterial = undefined;\r\n\r\n        imageOffsets = [];\r\n        imageBGOffsets = [];\r\n        imageBGEase = [];\r\n        imageRotate = [];\r\n        imageScale = [];\r\n        imageSize = [];\r\n        imageTexture = [];\r\n        imageTextureIdx = [];\r\n        imageSlideProgress = [];\r\n        imageDisplacement = [];\r\n        imageVisible = [];\r\n        imageLoaded = [];\r\n        imageInScreenIdx = [];\r\n        imageInScreenTexture = [];\r\n        imageClickedIdx = undefined;\r\n        tempImageSize = [];\r\n\r\n        rotate = {x:0, y:0, z:0};\r\n\r\n        initedImage = false;\r\n      }\r\n    }\r\n    removeImageFunction.current = {removeImage}\r\n\r\n\r\n    // const start = Date.now();\r\n    const draw = () => {\r\n      // const timer = (Date.now() - start) * 0.0001;\r\n\r\n      logoRotateSpeed.value += rotateSpeed.value;\r\n      logo.rotation.x += (logoRotateSpeed.value - logo.rotation.x) * .1;\r\n      logo.rotation.y += (logoRotateSpeed.value - logo.rotation.y) * .1;\r\n      logo.material.uniforms.slideProgress.value = options.slideProgress;\r\n\r\n\r\n      for (let i = 0; i < instancedCount; i++) {\r\n        let x = planeOffsets[i * 3 + 0];\r\n        let y = (planeOffsets[i * 3 + 1] += options.planeSpeed * planeSpeed[i]);\r\n\r\n        if (y > screenHeight / 2 + planeHeight+1) {\r\n          let botPos = -screenHeight / 2 - planeHeight-1;\r\n          planeSpeed[i] = Math.random()+.5;\r\n          planeOffsets[i * 3 + 1] = botPos;\r\n          const r = getRandomXY(botPos);\r\n          x = r.x;\r\n          y = r.y;\r\n          planeOffsets[i * 3 + 0] = x;\r\n          planeOffsets[i * 3 + 1] = y;\r\n        }\r\n        planeOffsetAttribute.setXY(i, x, y);\r\n      }\r\n      planeOffsetAttribute.needsUpdate = true;\r\n\r\n\r\n      loadImage();\r\n      if(initedImage && imageSize.length){\r\n        imageInScreenIdx = [];\r\n        imageInScreenTexture = [];\r\n\r\n\r\n        for(let i=0; i<imageInstancedCount; i++){\r\n          const realCount = imageInstancedCount/2;\r\n          let ease = disableEase ? 1 : imageBGEase[i];\r\n\r\n\r\n          if(i !== images.material.uniforms.clickedIdx.value){\r\n            const _i = i%realCount;\r\n            if(imageSize[_i]){\r\n              // console.log(i%realCount+1)\r\n              // const elem = document.querySelector(`#projects li:nth-child(${i%realCount+1}) .imageWrap`);\r\n              if(imageWrapDOM){\r\n                const elem = imageWrapDOM[i%realCount].children[1];\r\n                const pos = elem.getBoundingClientRect();\r\n\r\n                if(i < realCount){\r\n                  if(pos.top > -imageSize[_i].h*2 && pos.top < window.innerHeight+imageSize[_i].h*2){\r\n                  // if(pos.top > 0 && pos.top < window.innerHeight){\r\n                    imageInScreenIdx.push(i);\r\n                    if(imageInScreenTexture.length < limitedTextureCount)\r\n                    imageInScreenTexture.push(imageTexture[i]);\r\n                    \r\n                    imageVisible[i] = 1;\r\n                    imageVisible[i+realCount] = 1;\r\n                  }\r\n                  else{\r\n                    imageVisible[i] = 0;\r\n                    imageVisible[i+realCount] = 0;\r\n                  }\r\n                  imageVisibleAttribute.setX(i, imageVisible[i]);\r\n                  imageVisibleAttribute.setX(i+realCount, imageVisible[i+realCount]);\r\n                }\r\n                \r\n                const {x, y} = convert2dto3d(pos.left+ imageSize[_i].w/2, pos.top + imageSize[_i].h/2);\r\n                offset = {x, y, z:0};\r\n\r\n                // resize image\r\n                // if(tempImageSize.length){\r\n                //   if(tempImageSize[_i]){ console.log(1)\r\n                //     const scaleHeight = imageSize[_i].h / (imageSize[_i].w);\r\n                //     const w = imageSize[_i].w / tempImageSize[_i].w;\r\n                //     const hh = (1-initHeight/window.innerHeight);\r\n                //     imageScaleAttribute.setXY(i, imageSize[_i].w/tempImageSize[_i].w - hh * w, scaleHeight * (imageSize[_i].w/tempImageSize[_i].w - hh * w)  );\r\n                //   }\r\n                // }\r\n              }\r\n            }\r\n          }\r\n          else{\r\n              offset = {x:0, y:0, z:30};\r\n              // console.log(rotate.x % (Math.PI*2));\r\n              rotate.x += 0.001;\r\n              rotate.y += 0.001;\r\n          }\r\n\r\n\r\n          \r\n          if(i >= realCount){\r\n            if(i === imageClickedIdx){\r\n              ease = imageBGEase[i];\r\n\r\n              imageRotate[i*3+0] += (rotate.x - imageRotate[i*3+0]) * .1;\r\n              imageRotate[i*3+1] += (rotate.y - imageRotate[i*3+1]) * .1;\r\n              imageRotate[i*3+2] += (rotate.z - imageRotate[i*3+2]) * .1;\r\n\r\n              if(imageRotate[i*3+0] >= (Math.PI*2)){\r\n                imageRotate[i*3+0] = 0;\r\n                rotate.x = 0;\r\n              }\r\n              if(imageRotate[i*3+1] >= (Math.PI*2)){\r\n                imageRotate[i*3+1] = 0;\r\n                rotate.y = 0;\r\n              }\r\n            }\r\n            // else{\r\n            //   console.log(1);\r\n            //   imageRotate[i*3+0] += (0 - imageRotate[i*3+0]) * .1;\r\n            //   imageRotate[i*3+1] += (0 - imageRotate[i*3+1]) * .1;\r\n            //   imageRotate[i*3+2] += (0 - imageRotate[i*3+2]) * .1;\r\n            // }\r\n            imageOffsets[i*3+0] += (offset.x - imageOffsets[i*3+0]) * ease;\r\n            imageOffsets[i*3+1] += (offset.y - imageOffsets[i*3+1]) * ease;\r\n            imageOffsets[i*3+2] += (offset.z - imageOffsets[i*3+2]) * ease;\r\n          }\r\n          else{\r\n            // target blue bg\r\n            if(i === imageClickedIdx-realCount){\r\n              ease = imageBGEase[i];\r\n            }\r\n\r\n            // target blue bg\r\n            if(i === imageClickedIdx-realCount && images.material.uniforms.clickedIdx.value > -1){\r\n              imageRotate[i*3+1] += (90*Math.PI/180 - imageRotate[i*3+1]) * ease;\r\n\r\n              imageOffsets[i*3+0] += (0 - imageOffsets[i*3+0]) * ease;\r\n              imageOffsets[i*3+1] += (0 - imageOffsets[i*3+1]) * ease;\r\n              imageOffsets[i*3+2] += (0 - imageOffsets[i*3+2]) * ease;\r\n            }\r\n            else{ // other blue bg\r\n              imageRotate[i*3+1] += (0 - imageRotate[i*3+1]) * ease;\r\n\r\n              imageOffsets[i*3+0] += ((offset.x-imageBGOffsets[i].x) - imageOffsets[i*3+0]) * ease;\r\n              imageOffsets[i*3+1] += ((offset.y+imageBGOffsets[i].y) - imageOffsets[i*3+1]) * ease;\r\n              imageOffsets[i*3+2] += ((offset.z+imageBGOffsets[i].z) - imageOffsets[i*3+2]) * ease;\r\n            }\r\n          }\r\n\r\n          imageOffsetAttribute.setXYZ(i, imageOffsets[i*3+0], imageOffsets[i*3+1], imageOffsets[i*3+2]);\r\n          imageRotateAttribute.setXYZ(i, imageRotate[i*3+0], imageRotate[i*3+1], imageRotate[i*3+2]);\r\n          imageSlideProgressAttribute.setX(i, imageSlideProgress[i].value);\r\n          imageDisplacementAttribute.setX(i, imageDisplacement[i].value);\r\n        }\r\n\r\n        for(let i=imageInScreenIdx.length; i<limitedTextureCount; i++){\r\n          imageInScreenIdx.push(-1);\r\n        }\r\n        for(let i=imageInScreenTexture.length; i<limitedTextureCount; i++){\r\n          imageInScreenTexture.push(imageTexture[0]);\r\n        }\r\n        imagesMaterial.uniforms.inScreenIdx.value = imageInScreenIdx;\r\n        imagesMaterial.uniforms.inScreenTexture.value = imageInScreenTexture;\r\n\r\n\r\n        imageOffsetAttribute.needsUpdate = true;\r\n        imageRotateAttribute.needsUpdate = true;\r\n        imageScaleAttribute.needsUpdate = true;\r\n        imageSlideProgressAttribute.needsUpdate = true;\r\n        imageDisplacementAttribute.needsUpdate = true;\r\n        imageVisibleAttribute.needsUpdate = true;\r\n      }\r\n    };\r\n\r\n    const update = () => {\r\n      draw();\r\n      camera.lookAt(0, 0, 0);\r\n      // stats.update();\r\n    };\r\n\r\n    const render = () => {\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    init();\r\n\r\n    \r\n    \r\n    const onClick = (e) => {\r\n      if(!clicked){\r\n        if(e.target.getAttribute('id') !== 'langBtn'){\r\n          clicked =true;\r\n          props.dispatch(updatePage('projects'));\r\n          props.dispatch(updateIsStarted(true));\r\n\r\n          const tl = new TimelineMax();\r\n          tl.to(options, 1.6, {planeSpeed: 2, ease:'Power3.easeInOut'},0);\r\n          tl.to(options, 3, {slideProgress:1, ease:'Power2.easeOut'},0);\r\n          tl.to(logo.position, 2, {x:0, z: -20, ease:'Power2.easeInOut'},0);\r\n          tl.to(rotateSpeed, 1.3, {value: .05, ease:'Power1.easeOut'},0);\r\n          tl.to(plane.material, 1, {opacity: .3, ease:'Power1.easeOut'},0);\r\n          tl.to(rotateSpeed, 1.3, {value: .004, ease:'Power3.easeInOut'},1.3);\r\n          tl.to(options, 1.6, {planeSpeed: .1, ease:'Power3.easeInOut'},1.3);\r\n        }\r\n      }\r\n    };\r\n    onClickFunction.current = {onClick};\r\n\r\n\r\n    const backToHome = (page) => {\r\n      if(page !== 'home'){\r\n        props.dispatch(updatePage('home'));\r\n        props.dispatch(updateIsStarted(false));\r\n        props.dispatch(updateImageClickedIdx(null));\r\n        props.dispatch(updateHideProjects(false));\r\n        const tl = new TimelineMax();\r\n        tl.to(options, 2, {slideProgress:0, ease:'Power3.easeOut'},0);\r\n        tl.to(plane.material, 2, {opacity: 1, ease:'Power1.easeOut'},0);\r\n        tl.to(logo.position, 2, {x:5, z: 20, ease:'Power2.easeInOut',\r\n          onComplete:()=>{clicked = false;}\r\n        },0);\r\n        removeImage();\r\n      }\r\n    }\r\n    backToHomeFunction.current = {backToHome};\r\n\r\n\r\n\r\n    const onWindowResize = () => {\r\n      // camera.left = -window.innerWidth / 2;\r\n      // camera.right = window.innerWidth / 2;\r\n      // camera.top = window.innerHeight / 2;\r\n      // camera.bottom = -window.innerHeight / 2;\r\n      camera.aspect = window.innerWidth / window.innerHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n      if(initedImage){\r\n        resizeImage();\r\n      }\r\n\r\n      const screen = getScreenSize();\r\n        screenWidth = screen.width;\r\n        screenHeight = screen.height;\r\n      };\r\n      window.addEventListener(\"resize\", onWindowResize);\r\n      // document.addEventListener(\"click\", onClick);\r\n\r\n      return () => {\r\n        window.removeEventListener(\"resize\", onWindowResize);\r\n        // document.removeEventListener(\"click\", onClick);\r\n      };\r\n    },[canvasWrap]);\r\n\r\n\r\n    useEffect(()=>{\r\n      if(props.data)\r\n        document.addEventListener(\"click\", onClickFunction.current.onClick);\r\n      return () => {\r\n        document.removeEventListener(\"click\", onClickFunction.current.onClick);\r\n      };\r\n    },[props.data])\r\n    \r\n\r\n    // when clicked image\r\n    useEffect(()=>{\r\n      updateImageEffectFunction.current.imageEffect(props.imageClickedIdx);\r\n    },[props.imageClickedIdx]);\r\n\r\n\r\n    // when updated category or language\r\n    useEffect(()=>{\r\n      if(props.projectItems && props.imageClickedIdx === null && props.page === 'projects'){\r\n        const idx = props.data['projects'].categories.findIndex(v => v.slug === props.category);\r\n\r\n        removeImageFunction.current.removeImage();\r\n        initImageFunction.current.initImage( idx < 0 ? 0 : idx, props.projectItems, props.projectItems.length);\r\n      }\r\n    },[props.projectItems]);\r\n\r\n    useEffect(()=>{\r\n      if(prevProps){\r\n        if(prevProps.page !== 'projects' && props.page === 'projects'){\r\n          updateStopEaseFunction.current.stopEase();\r\n        }\r\n      }\r\n    },[props.page])\r\n\r\n    useEffect(()=>{\r\n      if(props.isHideProjects){\r\n        removeImageFunction.current.removeImage();\r\n      }\r\n    },[props.isHideProjects])\r\n\r\n    useEffect(()=>{\r\n      backToHomeFunction.current.backToHome(props.page);\r\n    },[props.lang])\r\n\r\n    return <div ref={canvasWrap} id=\"canvasWrap\" />\r\n  };\r\n\r\n  const mapStateToProps = state => {\r\n    return {\r\n      lang: state.lang,\r\n      isStarted: state.isStarted,\r\n      data: state.data ? state.data[state.lang] : null,\r\n      projectItems: state.projectItems,\r\n      category: state.category,\r\n      imageClickedIdx: state.imageClickedIdx,\r\n      page: state.page,\r\n      isHideProjects: state.isHideProjects\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ThreejsBg);\r\n","import React, { Component } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateLanguage } from \"../../../src/reducers\";\r\n// import smoothScroll from \"./scroll\";\r\n\r\nimport Nav from \"../nav\";\r\nimport Home from \"../../page/home\";\r\nimport Projects from \"../../page/projects\";\r\nimport ProjectSingle from \"../../page/single/project\";\r\nimport About from \"../../page/about\";\r\n\r\nimport ThreejsBg from \"../ThreejsBg\";\r\n\r\n// const usePrevious = (value) => {\r\n//   const ref = useRef();\r\n//   useEffect(() => {\r\n//     ref.current = value;\r\n//   });\r\n//   return ref.current;\r\n// }\r\n\r\nclass PageWrap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    this.bodyWrap = null;\r\n  }\r\n\r\n\r\n  // shouldComponentUpdate(nextProps){\r\n  //   if(this.props.lang !== nextProps.lang){\r\n  //     this.props.dispatch(fetchGlobalData());\r\n  //     return true;\r\n  //   }\r\n  //   return false;\r\n  // }\r\n\r\n  componentDidMount() {\r\n    // this.props.dispatch(fetchGlobalData());\r\n    if(this.props.match.params.lang !== this.props.lang)\r\n      this.props.dispatch(updateLanguage(this.props.match.params.lang));\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        <Nav {...this.props} />\r\n        <div ref={elem => this.bodyWrap = elem} id=\"bodyWrap\" className={`body_wrap ${this.props.lang}`}>\r\n          <Switch>\r\n            <Route\r\n              exact\r\n              path=\"/:lang/\"\r\n              render={props => {\r\n                return <>\r\n                  <Home {...props} />\r\n                  <Projects {...props} />\r\n                  <ProjectSingle {...props} />\r\n                  <About {...props} />\r\n                </>\r\n              }}\r\n            />\r\n          </Switch>\r\n        </div>\r\n        <ThreejsBg {...this.props} />\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { \r\n    lang: state.lang,\r\n    isStarted: state.isStarted,\r\n    page: state.page\r\n    // imageClickedIdx: state.imageClickedIdx\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(PageWrap);\r\n","import React, { Component } from \"react\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport PageWrap from \"./_component/pagewrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchAllData } from './reducers';\r\nimport \"./sass/style.scss\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      deviceType: this.getDevice(),\r\n      isMobile: null\r\n    };\r\n\r\n    this.isMobile = this.isMobile.bind(this);\r\n    this.getDevice = this.getDevice.bind(this);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.reload = this.reload.bind(this);\r\n    this.adjustFontSize = this.adjustFontSize.bind(this);\r\n    this.baseFontRatio = 16 / 1440;\r\n    this.fontMultiplier = 0.84375;\r\n    this.timer=null;\r\n  }\r\n\r\n\r\n  getDevice() {\r\n    try {\r\n      const w = window,\r\n        d = document,\r\n        documentElement = d.documentElement,\r\n        body = d.getElementsByTagName(\"body\")[0];\r\n      let width =\r\n        w.innerWidth || documentElement.clientWidth || body.clientWidth;\r\n      let deviceType = \"\";\r\n\r\n      (function(a) {\r\n        if (\r\n          /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n            a\r\n          ) ||\r\n          /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\r\n            a.substr(0, 4)\r\n          )\r\n        ) {\r\n          if (width > 700) deviceType = \"tablet\";\r\n          else deviceType = \"mobile\";\r\n        } else deviceType = \"desktop\";\r\n      })(navigator.userAgent || navigator.vendor || window.opera);\r\n\r\n      return deviceType;\r\n    } catch (e) {\r\n      return \"desktop\";\r\n    }\r\n  }\r\n\r\n  isMobile() {\r\n    try {\r\n      const w = window,\r\n        d = document,\r\n        documentElement = d.documentElement,\r\n        body = d.getElementsByTagName(\"body\")[0];\r\n      let width =\r\n        w.innerWidth || documentElement.clientWidth || body.clientWidth;\r\n      let check = false;\r\n\r\n      (function(a) {\r\n        if (\r\n          /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n            a\r\n          ) ||\r\n          /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\r\n            a.substr(0, 4)\r\n          ) ||\r\n          width <= 1024\r\n        )\r\n          check = true;\r\n      })(navigator.userAgent || navigator.vendor || window.opera);\r\n\r\n      return check;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  adjustFontSize = function() {\r\n    const width = window.innerWidth;\r\n    const roundNumber = Math.round(\r\n      this.baseFontRatio * width * this.fontMultiplier\r\n    );\r\n\r\n    if (roundNumber >= 16)\r\n      document.documentElement.style.fontSize = roundNumber + \"px\";\r\n    else document.documentElement.style.fontSize = \"\";\r\n  };\r\n\r\n  onResize() {\r\n    this.setState({\r\n      deviceType: this.getDevice()\r\n    });\r\n    this.setState({\r\n      isMobile: this.isMobile()\r\n    });\r\n    this.adjustFontSize();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchAllData());\r\n    this.onResize();\r\n    window.addEventListener(\"resize\", this.onResize);\r\n\r\n    window.addEventListener(\"touchstart\", this.reload);\r\n    window.addEventListener(\"mousedown\", this.reload);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.onResize);\r\n    window.removeEventListener(\"touchstart\", this.reload);\r\n    window.removeEventListener(\"mousedown\", this.reload);\r\n  }\r\n\r\n  reload(){\r\n    clearTimeout(this.timer);\r\n    this.timer = setTimeout(()=>{\r\n      window.location.reload();\r\n    },1000*60*5);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          path=\"/:lang?/:section?/:title?/:page?/\"\r\n          render={props => {\r\n            if (/^(en|zh)$/.test(props.match.params.lang)) {\r\n              // if (this.props.lang !== props.match.params.lang)\r\n                // this.props.dispatch(updateLanguage(props.match.params.lang));\r\n\r\n              return <PageWrap {...props} />;\r\n            } else {\r\n              return <Redirect to={`/en` + props.location.pathname} />;\r\n            }\r\n          }}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    lang: state.lang\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from \"react\";\r\nimport { render, hydrate } from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport Loadable from \"react-loadable\";\r\nimport { Frontload } from \"react-frontload\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\nimport createStore from \"./store\";\r\nimport App from \"./App\";\r\n\r\nconst { store, history } = createStore();\r\n\r\nconst Application = (\r\n  <Provider store={store}>\r\n    <ConnectedRouter history={history}>\r\n      <Frontload noServerRender={true}>\r\n        <Route render={props => <App {...props} />} />\r\n      </Frontload>\r\n    </ConnectedRouter>\r\n  </Provider>\r\n);\r\n\r\nconst root = document.querySelector(\"#root\");\r\n\r\nif (root.hasChildNodes() === true) {\r\n  // If it's an SSR, we use hydrate to get fast page loads by just\r\n  // attaching event listeners after the initial render\r\n  Loadable.preloadReady().then(() => {\r\n    hydrate(Application, root);\r\n  });\r\n} else {\r\n  // If we're not running on the server, just render like normal\r\n  render(Application, root);\r\n}\r\n"],"sourceRoot":""}